<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="OutputsInInitialize" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.1.devel">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 22, 1622, 870}, maximized=true}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1388, 760]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0037058918309256">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{391.5664824486302, 292.9953458904109}">
    </property>
    <property name="SysMLSequentialDirector" class="ptolemy.domains.sysml.kernel.SysMLSequentialDirector">
        <property name="localClock" class="ptolemy.actor.LocalClock">
            <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
        </property>
        <property name="startTime" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <property name="stopTime" class="ptolemy.data.expr.Parameter" value="300">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[70.0, -10.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="12">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model, provided by Lev Greenburg, used to fail because outputs were being produced during preintialize, before&#10;receivers were created.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{-200.0, 355.0}">
        </property>
    </property>
    <entity name="ModalModel" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-203.0, 200.0]">
        </property>
        <port name="P1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="P2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="P3" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="P4" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="errorCause" class="ptolemy.data.expr.Parameter">
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={373, 207, 934, 635}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-164.671875, 59.8125}">
            </property>
            <property name="x" class="ptolemy.data.expr.Parameter" value="5">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-50, -155}">
                </property>
                <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <port name="P1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 60.0}">
                </property>
            </port>
            <port name="P2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 100.0}">
                </property>
            </port>
            <port name="P3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 140.0}">
                </property>
            </port>
            <port name="P4" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 180.0}">
                </property>
            </port>
            <entity name="state" class="ptolemy.domains.modal.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-300.0, -45.0]">
                </property>
            </entity>
            <entity name="state2" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-205.0, 105.0]">
                </property>
            </entity>
            <entity name="state3" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 200.0]">
                </property>
            </entity>
            <entity name="state4" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-280, 15}">
                </property>
            </entity>
            <entity name="state5" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-305.0, 250.0]">
                </property>
            </entity>
            <entity name="state6" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-380.0, 135.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P1=x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.054658720445493">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.0533397660010728">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P2=x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.0240355934756833">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.6041612294246226">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="timeout(200)">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.5445683574878473">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.9534170238514408">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.3630984187835133">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation5" class="ptolemy.domains.modal.kernel.Transition">
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P3=x">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.9068415524785324">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.5212162593280634">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation6" class="ptolemy.domains.modal.kernel.Transition">
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P4=x">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.501321560991801">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.8560872158527357">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <link port="state.outgoingPort" relation="relation4"/>
            <link port="state2.incomingPort" relation="relation"/>
            <link port="state2.outgoingPort" relation="relation2"/>
            <link port="state3.incomingPort" relation="relation2"/>
            <link port="state3.outgoingPort" relation="relation5"/>
            <link port="state4.incomingPort" relation="relation3"/>
            <link port="state4.incomingPort" relation="relation4"/>
            <link port="state4.outgoingPort" relation="relation"/>
            <link port="state5.incomingPort" relation="relation5"/>
            <link port="state5.outgoingPort" relation="relation6"/>
            <link port="state6.incomingPort" relation="relation6"/>
            <link port="state6.outgoingPort" relation="relation3"/>
        </entity>
        <relation name="P1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="P2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="P3Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="P4Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="P1" relation="P1Relation"/>
        <link port="P2" relation="P2Relation"/>
        <link port="P3" relation="P3Relation"/>
        <link port="P4" relation="P4Relation"/>
        <link port="_Controller.P1" relation="P1Relation"/>
        <link port="_Controller.P2" relation="P2Relation"/>
        <link port="_Controller.P3" relation="P3Relation"/>
        <link port="_Controller.P4" relation="P4Relation"/>
    </entity>
    <entity name="ModalModel2" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{75.0, 90.0}">
        </property>
        <port name="P1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="P2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="IN1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="IN2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="errorCause" class="ptolemy.data.expr.Parameter">
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={373, 207, 934, 635}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-164.671875, 59.8125}">
            </property>
            <property name="x" class="ptolemy.data.expr.Parameter" value="4">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-50, -155}">
                </property>
                <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="inPrev" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <port name="P1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 60.0}">
                </property>
            </port>
            <port name="P2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 100.0}">
                </property>
            </port>
            <port name="IN1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-495.0, 60.0}">
                </property>
            </port>
            <port name="IN2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-495.0, 125.0]">
                </property>
            </port>
            <entity name="state" class="ptolemy.domains.modal.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-275.0, -65.0]">
                </property>
            </entity>
            <entity name="state3" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 200.0]">
                </property>
            </entity>
            <entity name="state4" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-280, 15}">
                </property>
            </entity>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.2117432107176906">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.006617112181845">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.5698499327780937">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="IN1_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P1=IN1+x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.054658720445493">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.143839375178537">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="IN2_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P2=IN2+x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-2.002191610952117">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.044016048114624">
                </property>
            </relation>
            <link port="state.outgoingPort" relation="relation4"/>
            <link port="state3.incomingPort" relation="relation"/>
            <link port="state3.incomingPort" relation="relation2"/>
            <link port="state3.outgoingPort" relation="relation3"/>
            <link port="state4.incomingPort" relation="relation3"/>
            <link port="state4.incomingPort" relation="relation4"/>
            <link port="state4.outgoingPort" relation="relation"/>
            <link port="state4.outgoingPort" relation="relation2"/>
        </entity>
        <relation name="P1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="P2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="IN1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="IN2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="P1" relation="P1Relation"/>
        <link port="P2" relation="P2Relation"/>
        <link port="IN1" relation="IN1Relation"/>
        <link port="IN2" relation="IN2Relation"/>
        <link port="_Controller.P1" relation="P1Relation"/>
        <link port="_Controller.P2" relation="P2Relation"/>
        <link port="_Controller.IN1" relation="IN1Relation"/>
        <link port="_Controller.IN2" relation="IN2Relation"/>
    </entity>
    <entity name="ModalModel4" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[225.0, 150.0]">
        </property>
        <port name="in1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="in2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="in3" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="in4" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="log" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="errorCause" class="ptolemy.data.expr.Parameter">
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={80, 482, 934, 635}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{156.0880584716797, 254.8125}">
            </property>
            <port name="in1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-156.2460479736336, 362.38118743896484]">
                </property>
            </port>
            <port name="in2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-156.2460479736336, 402.38118743896484]">
                </property>
            </port>
            <port name="in3" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-156.2460479736336, 442.38118743896484]">
                </property>
            </port>
            <port name="in4" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-156.2460479736336, 482.38118743896484]">
                </property>
            </port>
            <port name="log" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[495.0, 260.0]">
                </property>
            </port>
            <entity name="state" class="ptolemy.domains.modal.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[270.0, 135.0]">
                </property>
            </entity>
            <entity name="state2" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[120.0, 245.0]">
                </property>
            </entity>
            <entity name="state3" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[365.0, 285.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="in1_isPresent || in2_isPresent || in3_isPresent || in4_isPresent">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="2.217899394134344">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="log = in1_isPresent + &quot; &quot; +in2_isPresent + &quot; &quot; +in3_isPresent + &quot; &quot; +in4_isPresent">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.2275600176141552">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-1.1384800206874306">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <link port="state.incomingPort" relation="relation3"/>
            <link port="state.outgoingPort" relation="relation"/>
            <link port="state2.incomingPort" relation="relation"/>
            <link port="state2.outgoingPort" relation="relation2"/>
            <link port="state3.incomingPort" relation="relation2"/>
            <link port="state3.outgoingPort" relation="relation3"/>
        </entity>
        <relation name="in1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="in2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="in3Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="in4Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="logRelation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="in1" relation="in1Relation"/>
        <link port="in2" relation="in2Relation"/>
        <link port="in3" relation="in3Relation"/>
        <link port="in4" relation="in4Relation"/>
        <link port="log" relation="logRelation"/>
        <link port="_Controller.in1" relation="in1Relation"/>
        <link port="_Controller.in2" relation="in2Relation"/>
        <link port="_Controller.in3" relation="in3Relation"/>
        <link port="_Controller.in4" relation="in4Relation"/>
        <link port="_Controller.log" relation="logRelation"/>
    </entity>
    <entity name="CurrentTime" class="ptolemy.actor.lib.CurrentTime">
        <doc>Output the current time.</doc>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[530.0, 315.0]">
        </property>
    </entity>
    <entity name="ModalModel3" class="ptolemy.domains.modal.modal.ModalModel">
        <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{115.0, 245.0}">
        </property>
        <port name="P1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="P2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="IN1" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="IN2" class="ptolemy.domains.modal.modal.ModalPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
            <property name="errorCause" class="ptolemy.data.expr.Parameter">
            </property>
            <property name="annotation" class="ptolemy.kernel.util.Attribute">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Create a state machine here (and ports, if needed) and
create refinements for the states.  Create transitions
by holding the (Mac: command key, Windows: control key)
and dragging from one state to another.  
Right click to configure the properties 
of this model, including setting the final state(s).
Then delete this annotation.</text>
    </svg></configure>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-525.0, -190.0]">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                </property>
            </property>
            <property name="_library" class="ptolemy.moml.LibraryAttribute">
                <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={336, 142, 928, 616}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{-164.671875, 59.8125}">
            </property>
            <property name="x" class="ptolemy.data.expr.Parameter" value="4">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-50, -155}">
                </property>
                <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
            </property>
            <property name="inPrev" class="ptolemy.data.expr.Parameter" value="0">
            </property>
            <property name="_expertMode" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <port name="P1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 60.0}">
                </property>
            </port>
            <port name="P2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{165.0, 100.0}">
                </property>
            </port>
            <port name="IN1" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-495.0, 60.0}">
                </property>
            </port>
            <port name="IN2" class="ptolemy.domains.modal.modal.RefinementPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-495.0, 125.0]">
                </property>
            </port>
            <entity name="state" class="ptolemy.domains.modal.kernel.State">
                <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                </property>
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-275.0, -65.0]">
                </property>
            </entity>
            <entity name="state3" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[-195.0, 200.0]">
                </property>
            </entity>
            <entity name="state4" class="ptolemy.domains.modal.kernel.State">
                <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{-280, 15}">
                </property>
            </entity>
            <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.2117432107176906">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="-2.006617112181845">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation4" class="ptolemy.domains.modal.kernel.Transition">
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=0">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="0.6283185307179586">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.5698499327780937">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                </property>
            </relation>
            <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="IN1_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P1=IN1+x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.054658720445493">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.143839375178537">
                </property>
                <property name="immediate" class="ptolemy.data.expr.Parameter" value="false">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="IN2_isPresent">
                </property>
                <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="P2=IN2+x">
                </property>
                <property name="setActions" class="ptolemy.domains.modal.kernel.CommitActionsAttribute" value="x=x+1">
                </property>
                <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-2.002191610952117">
                </property>
                <property name="gamma" class="ptolemy.data.expr.Parameter" value="1.044016048114624">
                </property>
            </relation>
            <link port="state.outgoingPort" relation="relation4"/>
            <link port="state3.incomingPort" relation="relation"/>
            <link port="state3.incomingPort" relation="relation2"/>
            <link port="state3.outgoingPort" relation="relation3"/>
            <link port="state4.incomingPort" relation="relation3"/>
            <link port="state4.incomingPort" relation="relation4"/>
            <link port="state4.outgoingPort" relation="relation"/>
            <link port="state4.outgoingPort" relation="relation2"/>
        </entity>
        <relation name="P1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="P2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="IN1Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <relation name="IN2Relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
            </property>
        </relation>
        <link port="P1" relation="P1Relation"/>
        <link port="P2" relation="P2Relation"/>
        <link port="IN1" relation="IN1Relation"/>
        <link port="IN2" relation="IN2Relation"/>
        <link port="_Controller.P1" relation="P1Relation"/>
        <link port="_Controller.P2" relation="P2Relation"/>
        <link port="_Controller.IN1" relation="IN1Relation"/>
        <link port="_Controller.IN2" relation="IN2Relation"/>
    </entity>
    <entity name="NonStrictTest" class="ptolemy.actor.lib.NonStrictTest">
        <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{3, 3}">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-100.0, 50.0]">
        </property>
    </entity>
    <entity name="NonStrictTest2" class="ptolemy.actor.lib.NonStrictTest">
        <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{3, 3}">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-80.0, 310.0]">
        </property>
    </entity>
    <entity name="NonStrictTest3" class="ptolemy.actor.lib.NonStrictTest">
        <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{&quot;true false false false&quot;, &quot;false false true false&quot;, &quot;false true false false&quot;, &quot;false false false true&quot;, &quot;true false false false&quot;, &quot;false false true false&quot;, &quot;false true false false&quot;, &quot;false false false true&quot;}">
        </property>
        <property name="trainingMode" class="ptolemy.actor.parameters.SharedParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 55.0]">
        </property>
    </entity>
    <entity name="NonStrictTest4" class="ptolemy.actor.lib.NonStrictTest">
        <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{0.0, 0.0, 0.0, 0.0, 200.0, 200.0, 200.0, 200.0}">
        </property>
        <property name="tolerance" class="ptolemy.data.expr.Parameter" value="2.0E-7">
        </property>
        <property name="trainingMode" class="ptolemy.actor.parameters.SharedParameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 290.0]">
        </property>
    </entity>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="{310.0, 145.0}">
        </vertex>
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[-128.0, 190.0]">
        </vertex>
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[-150.0, 135.0]">
        </vertex>
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        <property name="color" class="ptolemy.actor.gui.ColorAttribute">
        </property>
    </relation>
    <link port="ModalModel.P1" relation="relation5"/>
    <link port="ModalModel.P2" relation="relation9"/>
    <link port="ModalModel.P3" relation="relation"/>
    <link port="ModalModel.P4" relation="relation6"/>
    <link port="ModalModel2.P1" relation="relation3"/>
    <link port="ModalModel2.P2" relation="relation4"/>
    <link port="ModalModel2.IN1" relation="relation5"/>
    <link port="ModalModel2.IN2" relation="relation"/>
    <link port="ModalModel4.in1" relation="relation3"/>
    <link port="ModalModel4.in2" relation="relation4"/>
    <link port="ModalModel4.in3" relation="relation10"/>
    <link port="ModalModel4.in4" relation="relation11"/>
    <link port="ModalModel4.log" relation="relation7"/>
    <link port="CurrentTime.output" relation="relation2"/>
    <link port="CurrentTime.trigger" relation="relation7"/>
    <link port="ModalModel3.P1" relation="relation10"/>
    <link port="ModalModel3.P2" relation="relation11"/>
    <link port="ModalModel3.IN1" relation="relation9"/>
    <link port="ModalModel3.IN2" relation="relation6"/>
    <link port="NonStrictTest.input" relation="relation5"/>
    <link port="NonStrictTest2.input" relation="relation9"/>
    <link port="NonStrictTest3.input" relation="relation7"/>
    <link port="NonStrictTest4.input" relation="relation2"/>
</entity>
