<!-- $Id: eclipseSVN.htm 73406 2015-09-11 16:00:38Z cxh $ -->
<html>
  <head>
    <META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">
    <title>Eclipse is aware of the Subversion aspects of the project.</title> 
    <link href="../../../doc/default.css" rel="stylesheet" type="text/css">
  </head>
  <body>
    <h1>Eclipse is aware of the Subversion aspects of the project.</h1>
    <i>(Use both the Eclipse Subversion plug-in (Subversive) and the
    shell <code>svn</code> command).</i>

    <p>You can use both Eclipse and the TortoiseSVN version of
    Subversion or the Cygwin bash shell version of Subversion to
    update the tree.

    <br/>This choice is the <b>preferred</b> choice for collaborating with
    the Ptolemy group because it means that your Ptolemy II tree can get
    recent changes.

    <br/>The downside is that that the development tree is under
    development, so there may be bugs or instability.</p>


    <p>For other ways to set up Eclipse and Ptolemy II, see
      the <a href="project.htm" target="main">Setting up Eclipse to manage your Ptolemy II development Environment</a> page.</p>

    <p>There are at least two Subversion plugins for Eclipse, Subversive and Subclipse.  Either will work, for a brief comparison, see 
      <a href="http://chess.eecs.berkeley.edu/ptexternal/wiki/Main/Subversion#SubclipseVsSubversion#in_browser" target="_top">Subclipse vs. Subversion</a>.
      The instructions below are for Subversive. To use Subclipse, see
      <a href="https://kepler-project.org/developers/reference/kepler-and-eclipse#7-installing-subversion-svn#in_browser" target="_top">Installing Subversion (SVN) into Eclipse</a>.</p>

    <p>The <a href="http://www.eclipse.org/subversive/downloads.php#in_browser" target="_top">Subversive</a> Eclipse plug-in adds Subversion to
      Eclipse.  After installation, you can use either Eclipse to manage
      your project, or the <code>svn</code> from the command line.</p>

    <p>Follow the <a href="http://www.eclipse.org/subversive/downloads.php#in_browser" target="_top">Subversive installation instructions</a> or these instructions below:</p>

    <ol>
      <li> To download Subversive, in Eclipse, follow these menus
	<br/>The first time software is to be added the menu will be:
	<code>Help</code> | <code>Install New Software</code> 
      </li>
      <li>In the "Work with" field, select "Kepler - http://download.eclipse.org/releases/kepler" from the drop down.  The install facility will take a few moments to connect to the site and determine
	what is available.
      </li>
      <li>Expand the "Collaboration" tab and check the box next to
      "Subversive SVN Team Provider"</li>
      
      <li>Then click <code>Next</code>, <code>Next</code> again and click
	through the license agreement and hit <code>Finish</code>.  
      </li>
      <li> When the "Software Updates" window appears and asks about a
	restart, select "Restart Now" and restart.
      </li>
      <li> When Eclipse restarts, the "Workspace Launcher" window will appear.  
	<b>If you are upgrading Eclipse, it is best if you choose a new workspace directory.</b>
	If the workspace directory contains an project from a previous version of Eclipse, then
	there could be issues.
	</br>After choosing a new workspace directory, click on "OK".
      <li> The "Subversion Connector Discovery" window will pop up.  
	<br/> If it does not, bring up the preferences window:
	<br/> <code>Window</code> | <code>Preferences</code>
	<br/> Then do <code>Team</code> | <code>SVN</code> | <code>SVN Repositories</code>.  When you click
	on <code>SVN Repositories</code>, the "Subversion Connector Discovery" window
	will pop up.  (See <a href="http://www.polarion.com/products/svn/subversive/connector_discovery.php#in_browser" target="_top">http://www.polarion.com/products/svn/subversive/connector_discovery.php</a>
	for details.)
      </li>
      <li> In the "Subversion Connector Discovery" window, select a
      Subversion connector compatible with the version of svn
      installed on your machine.
	<br/>If you don't have Subversion installed on your machine, then skip to the <a href="#selectedSVNKit">next step</a>.
	<br/>To determine which version of Subversion is being run, start up a DOS or Cygwin shell and
run <code>svn --version</code>.  To start  a DOS Shell:
	<dl>
	  <dt>Windows Server 2003 or Windows XP:</dt>
	  <dd>Click on Start &gt; Run &gt and type <code>cmd</code></dd>
	  <dt>Windows Vista and 7</dt>
	  <dd>Click on Start  and type <code>cmd</code></dd>
	</dl>
	by going to Application -> Utilities and clicking on the Terminal icon, then type:
	<pre>
	  svn --version
	</pre>
	<br/>If <code>svn --version</code> returns 1.6, then install SVN Kit 1.3.8 or equivalent.
	<br/>If <code>svn --version</code> returns 1.7, then install SVN Kit 1.7.9 or equivalent.
	<br/>If you do not have the <code>svn</code> command installed, then select the most
	recent SVN Kit and you <i>should</i> be able to download ptII using the SVN Kit supplied by Eclipse.

	<p>Note: if you install a more recent version of the plugin than the
	  version of the command line <code>svn</code> tool, then
	  you will not be able to use the command line <code>svn</code> to
	  update or modify the tree that is checked out by Eclipse.
	  <br/>If you
	  run <code>svn</code> on a tree checked out by Eclipse and get a message 
	  <code> svn: This client is too old to work with working copy '.'; please get a newer Subversion
	    client</code>, then the solution is to
	  <a href="http://subversion.apache.org/packages.html#in_browser" target="_top">update svn</a>.</p>

	<p>Then do "Finish", "Next", "Next", Accept the license and then
	  "Finish".</p>
      </li>
	
      <li><a name="selectedSVNKit">If</a> you get a security warning about unsigned software, click
	"OK".
      </li>

      <li> When prompted for a restart, select "Restart Now".
      </li>

      <li> After Eclipse has restarted, the next steps are to download the <code>ptII</code>
	Subversion repository.

	<br/>In Eclipse, add the ptII SVN Repository:

	<br/><code>Window</code> | <code>Show View</code> | <code>Other</code> | <code>SVN</code> | <code>SVN Repositories</code>
	<br/>To see the SVN Repositories pane, you may need to close the Eclipse Welcome Window by clicking on the x in the tab.
      </li>

      <li>In the SVN Repository view, right click,
	select <code>New</code> | <code>Repository Location</code> and
	set the url.

	<br/>To check out the ptII svn repository with <b>read-only</b> access:

	<pre>
	  https://repo.eecs.berkeley.edu/svn-anon/projects/eal/ptII
	</pre>

	<p><b>Note:</b> Most users will select the <code><b>/svn-anon/</b></code> URL above because
	  they will be accessing the tree with <b>read-only</b> Subversion access.
	  <br/>If you have an UC Berkeley EECS LDAP account or have an external account on <code>repo.eecs.berkeley.edu</code>, then check out ptII with <b>read/write access</b>:</p>

	<pre>
	  https://repo.eecs.berkeley.edu/svn/projects/eal/ptII/
	</pre>
	Read/writes users may want to check "Save authentication".

	<p>Click "Finish"</p>

	<p>Read/write users will be prompted for their
	  repo.eecs.berkeley.edu username and password.</p>
      </li>

      <li>If you get a "Certificate Problem" window, then select
	<code>Trust</code> or <code>Trust Always</code>.  For details and
	a workaround, see <a href="http://chess.eecs.berkeley.edu/ptexternal/wiki/Main/Subversion#svnCertficateIsNotIssuedByATrustedAuthority#in_browser" target="_top">Certificate is not issued by a trusted authority</a>.
      </li>

      <li>In the SVN Repository view, expand the repository by
	clicking in the triangle at the left, then right click
	on <code>trunk</code> and select <code>Find/Check out As</code>
      </li>

      <blockquote>
	<table border="1">
	  <tr>
	    <td>
	      Be sure to check out the <b><code>trunk</code></b> not the
	      entire tree, which include all the branches and the trunk.
	    </td>
	  </tr>
	</table>
      </blockquote>

      Follow the wizard, creating selections as follows:
      <ol>
	<li> In the "Check Out As" window, keep the default,
	  <code>Check out as a project configured using the New Project Wizard</code>, then hit <code>Finish</code>.
	  <br/>(If <code>Check out as a project configure using the New Project Wizard</code> is disabled, then the
	  problem is someone checked a <code>.project</code> file into the repository.) 
	  <center>
	    <p><img src="../../img/eclipseCheckOutAs.png" alt="Eclipse Check Out As Window" width="630" height="497"></p>
	  </center>
	</li>
	<li> In the "New Project" window, select "Java" &gt; "Java project", Click "Next".
	  <center>
	    <p><img src="../../img/eclipseNewProject.png" alt="Eclipse New Project" width="525" height="500"></p>
	  </center>
	</li>
	<li>In the "New Java Project" window:
	  <br/> In "Project name", enter any project name,  <code>ptII</code>
	  is a common choice.
	  <br/>In "Project Layout", check "Use project folder as root for
	  source and class files".  If "Project Layout" is not selectable, then
	  that means that there is already a <code>.eclipse.epf</code> file in the
	  default location.  This is usually not a problem, but to be safe,
	  exit Eclipse, remove the file and restart Eclipse.
	  <br/> The issue here is that by default, Eclipse generates .class files in
	  a <code>bin/</code> directory.  However, the Ptolemy II source repository
	  has scripts in <code>$PTII/bin/</code>.  If Eclipse places .class files in
	  <code>bin/</code> then <code>$PTII/bin/makefile</code> will not exist
	  and <code>$PTII/bin/vergil</code> will not be created when <code>make</code>
	  is run.
	  <br/>Below is the "New Java Project" windows:
	  <center>
	    <p><img src="../../img/eclipseNewJavaProjectSVN.png" alt="Eclipse New Java Project" width="604" height="680"></p>
	  </center>
	</li>

	<li> Click "Finish".</li>

	<li> Wait for the checkout to finish. <i>Go get coffee.</i>
	  <br/><b>Note:</b>If you did not disable build automatically, as
	  suggested above, then Eclipse will build the project and produce
	  <b>thousands of errors</b>. This is not really a problem.  You will
	  fix the errors in the next step with the <code>.classpath.default</code> file.
	</li>


        <li><b>If you have read/write access to the <a href="https://www.terraswarm.org/accessors/#in_browser" target="_top">accessors</a> repository</b>, <b>and</b> your repo.eecs.berkeley.edu account name is an external name that is your email address, then check out it out as follows
          <br/>(<i>If your repo.eecs.berkeley.edu account name is the same as your login
            and you are checking out the ptII repo read/write and you have read/write access
            to the TerraSwarm accessors repo, then you may skip this step</i>)
          <br/>(<i>If you don't have read/write access, then skip this step</i>):
          <ol>
            <li>In Eclipse, add the <b>accessors</b> SVN Repository:
              <code>Window</code> | <code>Show View</code> | <code>Other</code> | <code>SVN</code> | <code>SVN Repositories</code>
            </li>
            <li>In the SVN Repository view, right click,
	      select <code>New</code> | <code>Repository Location</code> and
	      set the url.
              <pre>
                https://repo.eecs.berkeley.edu/svn/projects/terraswarm/accessors/
              </pre>
	      As you have read/write access, you may want to check "Save authentication".
	      <p>Click "Finish"</p>
              <p>You may be prompted for your password</p>
            </li>
            <li>In the SVN Repository view <b>of the accessors repo</b>, expand the accessors repository by
	      clicking in the triangle at the left, then right click
	      on <code>trunk</code> and select <code>Find/Check out As</code>
              <blockquote>
	        <table border="1">
	          <tr>
	            <td>
	              Be sure to check out the <b><code>trunk</code></b> not the
	              entire tree, which include all the branches and the trunk.
	            </td>
	          </tr>
	        </table>
              </blockquote>
              Follow the wizard, creating selections as follows:
              <ol>
	        <li> In the "Check Out As" window:
	          <code>Check out as a folder into existing project</code>, then hit <code>Next</code>.
	          <center>
	            <p><img src="../../img/eclipseAccessorsCheckOutAs.png" alt="AccessorsEclipse Check Out As Window" width="633" height="498"></p>
	          </center>
	        </li>
	        <li> In the "Check Out Into Project" window, browse to ptII/org/terraswarm/accessor, Click "Finish".  The accessors repo will be checked out.
	          <center>
	            <p><img src="../../img/eclipseAccessorsNewProject.png" alt="Eclipse New Project" width="633" height="500"></p>
	          </center>
	        </li>
              </ol>
              <p>The goal here is to create <code>org/terraswarm/accessor/accessors/web</code>. 
            </li>

	    <li><b>If you have read/write access to the ptII repo</b> go to <a href="setupSubversion.htm" target="main">Setup the Subversion Configuration to Sane Settings</a> so that if you commit files, they will have the appropriate settings.
	</li>

	<li>All users should go on to <a href="setupClasspath.htm" target="main">Set up the Eclipse ptII project .classpath for Ptolemy II</a>
	</li>

      </ol>
  </body>
</html>
