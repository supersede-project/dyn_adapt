<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="SmartRoom" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="11.0.devel">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={12, 53, 1235, 648}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1001, 538]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.7784919483032695">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{608.4869939630684, 291.3828125000002}">
    </property>
    <property name="WebServer" class="org.ptolemy.ptango.lib.WebServer">
        <property name="preferredPort" class="ptolemy.data.expr.Parameter" value="">
        </property>
        <property name="resourceLocation" class="ptolemy.data.expr.FileParameter" value="">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[710.0, 0.0]">
        </property>
    </property>
    <property name="DE Director" class="ptolemy.domains.de.kernel.DEDirector">
        <property name="stopWhenQueueIsEmpty" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="synchronizeToRealTime" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[25.0, -20.0]">
        </property>
    </property>
    <property name="enableBackwardTypeInference" class="ptolemy.data.expr.Parameter" value="true">
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Give server time to start&#10;Started in separate thread &#10;during initialize()&#10;&#10;">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 70.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Settings:&#10;DE Director: stopWhenQueueIsEmpty false&#10;Model: enableBackwardTypeInference true&#10;ThreadedComposites inside SmartRoomClient: delay UNDEFINED for all">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[105.0, -35.0]">
        </property>
    </property>
    <property name="getRequestCount" class="ptolemy.data.expr.Parameter" value="2.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[455.0, -25.0]">
        </property>
    </property>
    <property name="port" class="ptolemy.data.expr.Parameter" value="8001">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[630.0, 55.0]">
        </property>
    </property>
    <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-5.0, 170.0]">
        </property>
    </entity>
    <entity name="Stop" class="ptolemy.actor.lib.Stop">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[995.0, 205.0]">
        </property>
    </entity>
    <entity name="MicrostepDelay10" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[770.0, 205.0]">
        </property>
    </entity>
    <entity name="Discrete TimeDelay" class="ptolemy.actor.lib.TimeDelay">
        <property name="delay" class="ptolemy.actor.parameters.PortParameter" value="5.0">
        </property>
        <property name="minimumDelay" class="ptolemy.data.expr.Parameter" value="5.0">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[350.0, 170.0]">
        </property>
    </entity>
    <entity name="SmartRoomService" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 260.0]">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model launches a web server and provides a service&#10;available at http://localhost:8078/room&#10;Please run the model and navigate to that location&#10;(or run the model and double click on this comment).">
            </property>
            <property name="LiveLink" class="ptolemy.actor.gui.LiveLink" value="http://localhost:8078/room#in_browser">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">LL</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{440, 335}">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.RelativeLocation" value="[250.0, 25.0]">
            </property>
        </property>
        <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="GET /room :  Return page with picture of room and heat map&#10;Calls GET /room/markers and GET /room/data&#10;&#10;The model is executed when /room/data is called, &#10;so that the heat map can be updated independently of &#10;the rest of the page. &#10;&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[505.0, 190.00000000000006]">
            </property>
        </property>
        <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="GET /room/map : Fetches the data for the heat map and latest sensor readings,&#10;                            running the heat map model&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 870.0]">
            </property>
        </property>
        <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Locations of lights and sensors&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[255.0, 115.0]">
            </property>
        </property>
        <property name="lights" class="ptolemy.data.expr.Parameter" value="{{name = &quot;L1&quot;, x = 50.0, y = 150.0}, {name = &quot;L2&quot;, x = 120.0, y = 20.0}, {name = &quot;L3&quot;, x = 300.0, y = 202.0}, {name = &quot;L4&quot;, x = 499.0, y = 199.0}, {name = &quot;L5&quot;, x = 88.0, y = 88.0}}">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 125.0]">
            </property>
        </property>
        <property name="sensors" class="ptolemy.data.expr.Parameter" value="{{name = &quot;S1&quot;, value = 276.4607272626583, x = 11.0, y = 11.0}, {name = &quot;S2&quot;, value = 621.451367547874, x = 123.0, y = 224.0}, {name = &quot;S3&quot;, value = 214.2019819439534, x = 355.0, y = 401.0}}">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[520.0, 145.00000000000006]">
            </property>
        </property>
        <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="GET /room/markers : Fetches locations of lights and sensors&#10;POST /room/markers : Updates the locations of the lights and sensors.  &#10;Returns JSON &quot;OK&quot; message.  Format must be JSON (due to dataType in POST request) &#10;to avoid generating an error in the ajax call&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[50.0, 605.0]">
            </property>
        </property>
        <property name="Annotation7" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="postParameters port is a record type with fields&#10;lightsList and sensorsList of type string&#10;(Right click-&gt; Customize -&gt; Configure}&#10;&#10;JSONToToken output port is an array type of record types&#10;with fields x, y, name, and value (sensors only) which are all strings&#10;x, y and value are converted to doubles&#10;&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[715.0, 610.0]">
            </property>
        </property>
        <property name="Annotation8" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Type information for POST /room/markers&#10;&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[715.0, 580.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={-8, -8, 1382, 744}, maximized=true}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="0.5163329820864068">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{674.7359693877551, 483.4999999999999}">
        </property>
        <property name="Annotation9" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Add second delay so HttpResponse will be sent&#10;before a token might be sent to the done port&#10;&#10;&#10;&#10;">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 285.0]">
            </property>
        </property>
        <port name="done" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[965.0, 385.0]">
            </property>
        </port>
        <entity name="HttpActor" class="org.ptolemy.ptango.lib.HttpActor">
            <property name="path" class="ptolemy.data.expr.StringParameter" value="/room/*">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[83.5, 490.0]">
            </property>
        </entity>
        <entity name="HttpActor2" class="org.ptolemy.ptango.lib.HttpActor">
            <property name="path" class="ptolemy.data.expr.StringParameter" value="/room/map/*">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[73.0, 1002.5]">
            </property>
        </entity>
        <entity name="HttpActor3" class="org.ptolemy.ptango.lib.HttpActor">
            <property name="path" class="ptolemy.data.expr.StringParameter" value="/room/markers/*">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 720.0]">
            </property>
            <port name="postParameters" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="{lightsList=string, sensorsList=string}">
                </property>
            </port>
        </entity>
        <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[480.0, 685.0]">
            </property>
            <port name="lights" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="sensors" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="lights">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[390.0, 695.0]">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="sensors">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 730.0]">
            </property>
        </entity>
        <entity name="MicrostepDelay" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[245.0, 590.0]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
                </property>
            </port>
        </entity>
        <entity name="TokenToJSON" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[565.0, 725.0]">
            </property>
        </entity>
        <entity name="FileReader" class="ptolemy.actor.lib.io.FileReader">
            <property name="fileOrURL" class="ptolemy.data.expr.FileParameter" value="$PTII/org/ptolemy/ptango/demo/SmartRoom/pages/index.html">
            </property>
            <doc>Read an entire file and output as a string</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[238.5, 470.0]">
            </property>
        </entity>
        <entity name="MicrostepDelay2" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[148.5, 420.0]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
                </property>
            </port>
        </entity>
        <entity name="VisualModelReference" class="ptolemy.vergil.actor.lib.VisualModelReference">
            <property name="modelFileOrURL" class="ptolemy.actor.parameters.FilePortParameter" value="$PTII/org/ptolemy/ptango/demo/SmartRoom/Map.xml">
            </property>
            <property name="spawnSeparateModels" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[415.0, 990.0]">
            </property>
            <port name="result" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="{sensors=arrayType({x=double,y=double,name=string,value=double}), values=arrayType({x=double,y=double,value=double})}">
                </property>
            </port>
            <port name="lights" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="sensors" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="MicrostepDelay3" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[243.0, 857.5]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
                </property>
            </port>
        </entity>
        <entity name="TokenToJSON2" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[575.0, 990.0]">
            </property>
        </entity>
        <entity name="Const3" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="lights">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[269.99999999999994, 990.0]">
            </property>
        </entity>
        <entity name="Const4" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="sensors">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[277.99999999999994, 1032.5]">
            </property>
        </entity>
        <entity name="MicrostepDelay4" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 790.0]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="EAST">
                </property>
            </port>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="WEST">
                </property>
            </port>
        </entity>
        <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[500.0, 790.0]">
            </property>
            <port name="lightsList" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
                </property>
            </port>
            <port name="sensorsList" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="string">
                </property>
            </port>
        </entity>
        <entity name="JSONToToken" class="ptolemy.actor.lib.conversions.json.JSONToToken">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 810.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="arrayType({x=string,y=string,name=string})">
                </property>
            </port>
        </entity>
        <entity name="IterateOverArray" class="ptolemy.actor.lib.hoc.IterateOverArray">
            <doc>Iterate a contained actor over input arrays</doc>
            <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
            </property>
            <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
            </property>
            <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[830.0, 810.0]">
            </property>
            <port name="input" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                <property name="output"/>
            </port>
            <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                <property name="annotation" class="ptolemy.kernel.util.Attribute">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Make sure there is a director here!</text></svg></configure>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-5.0, 5.0}">
                    </property>
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="AUTO">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 80.0]">
                    </property>
                </property>
                <property name="annotation2" class="ptolemy.kernel.util.Attribute">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Convert string x, y coordinates to integers
ExpressionToToken, ExpressionToToken2 output ports set to double
(Right click -> Customize -> Ports)</text></svg></configure>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 45.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={219, 75, 928, 617}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{347.0, 254.984375}">
                </property>
                <port name="input" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 230.0]">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 230.0]">
                    </property>
                </port>
                <entity name="ExpressionToToken" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{260.0, 145.0}">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <entity name="ExpressionToToken2" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 195.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                    </property>
                    <port name="x" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="y" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="name" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 210.0]">
                    </property>
                    <port name="x" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="y" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="name" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <link port="input" relation="relation3"/>
                <link port="output" relation="relation4"/>
                <link port="ExpressionToToken.input" relation="relation5"/>
                <link port="ExpressionToToken.output" relation="relation"/>
                <link port="ExpressionToToken2.input" relation="relation6"/>
                <link port="ExpressionToToken2.output" relation="relation2"/>
                <link port="RecordAssembler.output" relation="relation4"/>
                <link port="RecordAssembler.x" relation="relation"/>
                <link port="RecordAssembler.y" relation="relation2"/>
                <link port="RecordAssembler.name" relation="relation7"/>
                <link port="RecordDisassembler.input" relation="relation3"/>
                <link port="RecordDisassembler.x" relation="relation5"/>
                <link port="RecordDisassembler.y" relation="relation6"/>
                <link port="RecordDisassembler.name" relation="relation7"/>
            </entity>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="lights">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[950.0, 810.0]">
            </property>
        </entity>
        <entity name="JSONToToken2" class="ptolemy.actor.lib.conversions.json.JSONToToken">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[680.0, 890.0]">
            </property>
            <port name="output" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="arrayType({x=string,y=string,name=string,value=double})">
                </property>
            </port>
        </entity>
        <entity name="IterateOverArray2" class="ptolemy.actor.lib.hoc.IterateOverArray">
            <doc>Iterate a contained actor over input arrays</doc>
            <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
            </property>
            <property name="_configurer" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
            </property>
            <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[830.0, 890.0]">
            </property>
            <port name="input" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                <property name="output"/>
            </port>
            <entity name="IterateComposite" class="ptolemy.actor.lib.hoc.IterateOverArray$IterateComposite">
                <property name="annotation" class="ptolemy.kernel.util.Attribute">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Make sure there is a director here!</text></svg></configure>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{-5.0, 5.0}">
                    </property>
                </property>
                <property name="SDF Director" class="ptolemy.domains.sdf.kernel.SDFDirector">
                    <property name="iterations" class="ptolemy.data.expr.Parameter" value="AUTO">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 80.0]">
                    </property>
                </property>
                <property name="annotation2" class="ptolemy.kernel.util.Attribute">
                    <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                    </property>
                    <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Convert string x, y coordinates to integers
ExpressionToToken, ExpressionToToken2 output ports set to double
(Right click -> Customize -> Ports)</text></svg></configure>
                    </property>
                    <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                        <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
                    </property>
                    <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[145.0, 45.0]">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={219, 75, 928, 617}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 500]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{347.0, 254.984375}">
                </property>
                <port name="input" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[20.0, 230.0]">
                    </property>
                </port>
                <port name="output" class="ptolemy.actor.lib.hoc.IterateOverArray$IteratePort">
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[570.0, 230.0]">
                    </property>
                </port>
                <entity name="ExpressionToToken" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{260.0, 145.0}">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <entity name="ExpressionToToken2" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 195.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[430.0, 210.0]">
                    </property>
                    <port name="x" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="y" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="name" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="value" class="ptolemy.actor.TypedIOPort">
                        <property name="input"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <entity name="RecordDisassembler" class="ptolemy.actor.lib.RecordDisassembler">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 210.0]">
                    </property>
                    <port name="x" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="y" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="name" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                    <port name="value" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                        </property>
                    </port>
                </entity>
                <entity name="ExpressionToToken3" class="ptolemy.actor.lib.conversions.ExpressionToToken">
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[260.0, 285.0]">
                    </property>
                    <port name="output" class="ptolemy.actor.TypedIOPort">
                        <property name="output"/>
                        <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
                        </property>
                    </port>
                </entity>
                <relation name="relation" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation4" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation5" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation6" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation7" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation9" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <relation name="relation8" class="ptolemy.actor.TypedIORelation">
                    <property name="color" class="ptolemy.actor.gui.ColorAttribute">
                    </property>
                </relation>
                <link port="input" relation="relation3"/>
                <link port="output" relation="relation4"/>
                <link port="ExpressionToToken.input" relation="relation5"/>
                <link port="ExpressionToToken.output" relation="relation"/>
                <link port="ExpressionToToken2.input" relation="relation6"/>
                <link port="ExpressionToToken2.output" relation="relation2"/>
                <link port="RecordAssembler.output" relation="relation4"/>
                <link port="RecordAssembler.x" relation="relation"/>
                <link port="RecordAssembler.y" relation="relation2"/>
                <link port="RecordAssembler.name" relation="relation7"/>
                <link port="RecordAssembler.value" relation="relation8"/>
                <link port="RecordDisassembler.input" relation="relation3"/>
                <link port="RecordDisassembler.x" relation="relation5"/>
                <link port="RecordDisassembler.y" relation="relation6"/>
                <link port="RecordDisassembler.name" relation="relation7"/>
                <link port="RecordDisassembler.value" relation="relation9"/>
                <link port="ExpressionToToken3.input" relation="relation9"/>
                <link port="ExpressionToToken3.output" relation="relation8"/>
            </entity>
        </entity>
        <entity name="SetVariable2" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="sensors">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[960.0, 890.0]">
            </property>
        </entity>
        <entity name="SetVariable3" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="sensors">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[705.0, 1055.0]">
            </property>
        </entity>
        <entity name="RecordDisassembler2" class="ptolemy.actor.lib.RecordDisassembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[535.0, 1045.0]">
            </property>
            <port name="sensors" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
                <property name="_type" class="ptolemy.actor.TypeAttribute" value="arrayType({x=double,y=double,name=string,value=double})">
                </property>
            </port>
            <port name="values" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const5" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="&quot;OK&quot;">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[240.0, 765.0]">
            </property>
        </entity>
        <entity name="TokenToJSON3" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 780.0]">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="getRequestCount + 1">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[419.0, 420.0]">
            </property>
            <port name="trigger" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="SetVariable5" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="getRequestCount">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[604.0, 420.0]">
            </property>
        </entity>
        <entity name="Comparator" class="ptolemy.actor.lib.logic.Comparator">
            <property name="comparison" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                <property name="style" class="ptolemy.actor.gui.style.ChoiceStyle">
                    <property name="gt" class="ptolemy.kernel.util.StringAttribute" value="&gt;">
                    </property>
                    <property name="ge" class="ptolemy.kernel.util.StringAttribute" value="&gt;=">
                    </property>
                    <property name="lt" class="ptolemy.kernel.util.StringAttribute" value="&lt;">
                    </property>
                    <property name="le" class="ptolemy.kernel.util.StringAttribute" value="&lt;=">
                    </property>
                    <property name="eq" class="ptolemy.kernel.util.StringAttribute" value="==">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="comparison">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[759.0, 430.0]">
            </property>
        </entity>
        <entity name="Const7" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="2">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[389.0, 480.0]">
            </property>
        </entity>
        <entity name="MicrostepDelay5" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[99.0, 360.0]">
            </property>
        </entity>
        <entity name="BooleanSwitch" class="ptolemy.actor.lib.BooleanSwitch">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[875.0, 395.0]">
            </property>
        </entity>
        <entity name="Discard" class="ptolemy.actor.lib.Discard">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[970.0, 450.0]">
            </property>
            <port name="input" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="multiport"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="NORTH">
                </property>
            </port>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[290.0, 680.0]">
            </vertex>
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[190.0, 970.0]">
            </vertex>
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation13" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation15" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation16" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation17" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation18" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation19" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation20" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[505.0, 990.0]">
            </vertex>
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation21" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation22" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation23" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation24" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation25" class="ptolemy.actor.TypedIORelation">
            <property name="color" class="ptolemy.actor.gui.ColorAttribute">
            </property>
        </relation>
        <relation name="relation26" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation27" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation30" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation31" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[40.0, 420.0]">
            </vertex>
        </relation>
        <relation name="relation32" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation33" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[314.0, 360.0]">
            </vertex>
        </relation>
        <relation name="relation28" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[840.0, 430.0]">
            </vertex>
        </relation>
        <relation name="relation29" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation34" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="done" relation="relation29"/>
        <link port="HttpActor.response" relation="relation8"/>
        <link port="HttpActor.getRequestURI" relation="relation26"/>
        <link port="HttpActor2.response" relation="relation10"/>
        <link port="HttpActor2.getRequestURI" relation="relation11"/>
        <link port="HttpActor3.response" relation="relation4"/>
        <link port="HttpActor3.response" relation="relation27"/>
        <link port="HttpActor3.getRequestURI" relation="relation"/>
        <link port="HttpActor3.postRequestURI" relation="relation21"/>
        <link port="HttpActor3.postParameters" relation="relation13"/>
        <link port="RecordAssembler.output" relation="relation6"/>
        <link port="RecordAssembler.lights" relation="relation2"/>
        <link port="RecordAssembler.sensors" relation="relation3"/>
        <link port="Const.output" relation="relation2"/>
        <link port="Const.trigger" relation="relation"/>
        <link port="Const2.output" relation="relation3"/>
        <link port="Const2.trigger" relation="relation"/>
        <link port="MicrostepDelay.input" relation="relation5"/>
        <link port="MicrostepDelay.output" relation="relation4"/>
        <link port="TokenToJSON.input" relation="relation6"/>
        <link port="TokenToJSON.output" relation="relation5"/>
        <link port="FileReader.output" relation="relation32"/>
        <link port="FileReader.trigger" relation="relation26"/>
        <link port="MicrostepDelay2.input" relation="relation32"/>
        <link port="MicrostepDelay2.output" relation="relation8"/>
        <link port="VisualModelReference.result" relation="relation20"/>
        <link port="VisualModelReference.lights" relation="relation12"/>
        <link port="VisualModelReference.sensors" relation="relation24"/>
        <link port="MicrostepDelay3.input" relation="relation9"/>
        <link port="MicrostepDelay3.output" relation="relation10"/>
        <link port="TokenToJSON2.input" relation="relation20"/>
        <link port="TokenToJSON2.output" relation="relation9"/>
        <link port="Const3.output" relation="relation12"/>
        <link port="Const3.trigger" relation="relation11"/>
        <link port="Const4.output" relation="relation24"/>
        <link port="Const4.trigger" relation="relation11"/>
        <link port="MicrostepDelay4.input" relation="relation23"/>
        <link port="MicrostepDelay4.output" relation="relation27"/>
        <link port="RecordDisassembler.input" relation="relation13"/>
        <link port="RecordDisassembler.lightsList" relation="relation14"/>
        <link port="RecordDisassembler.sensorsList" relation="relation18"/>
        <link port="JSONToToken.input" relation="relation14"/>
        <link port="JSONToToken.output" relation="relation15"/>
        <link port="IterateOverArray.input" relation="relation15"/>
        <link port="IterateOverArray.output" relation="relation16"/>
        <link port="SetVariable.input" relation="relation16"/>
        <link port="JSONToToken2.input" relation="relation18"/>
        <link port="JSONToToken2.output" relation="relation17"/>
        <link port="IterateOverArray2.input" relation="relation17"/>
        <link port="IterateOverArray2.output" relation="relation19"/>
        <link port="SetVariable2.input" relation="relation19"/>
        <link port="SetVariable3.input" relation="relation25"/>
        <link port="RecordDisassembler2.input" relation="relation20"/>
        <link port="RecordDisassembler2.sensors" relation="relation25"/>
        <link port="Const5.output" relation="relation22"/>
        <link port="Const5.trigger" relation="relation21"/>
        <link port="TokenToJSON3.input" relation="relation22"/>
        <link port="TokenToJSON3.output" relation="relation23"/>
        <link port="Expression.output" relation="relation30"/>
        <link port="Expression.trigger" relation="relation33"/>
        <link port="SetVariable5.input" relation="relation30"/>
        <link port="SetVariable5.output" relation="relation31"/>
        <link port="Comparator.left" relation="relation31"/>
        <link port="Comparator.right" relation="relation7"/>
        <link port="Comparator.output" relation="relation28"/>
        <link port="Const7.output" relation="relation7"/>
        <link port="Const7.trigger" relation="relation33"/>
        <link port="MicrostepDelay5.input" relation="relation8"/>
        <link port="MicrostepDelay5.output" relation="relation33"/>
        <link port="BooleanSwitch.input" relation="relation28"/>
        <link port="BooleanSwitch.control" relation="relation28"/>
        <link port="BooleanSwitch.trueOutput" relation="relation29"/>
        <link port="BooleanSwitch.falseOutput" relation="relation34"/>
        <link port="Discard.input" relation="relation34"/>
    </entity>
    <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[635.0, 185.0]">
        </property>
        <port name="clientdone" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="servicedone" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="Const" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[905.0, 205.0]">
        </property>
    </entity>
    <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
        <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="getRequestCount">
        </property>
        <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[265.0, 245.0]">
        </property>
    </entity>
    <entity name="Const2" class="ptolemy.actor.lib.Const">
        <property name="value" class="ptolemy.data.expr.Parameter" value="0">
        </property>
        <doc>Create a constant sequence.</doc>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 245.0]">
        </property>
    </entity>
    <entity name="SmartRoomClient" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 170.0]">
        </property>
        <property name="annotation" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">GET /room (also calls GET /room/markers and GET /room/map)</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[80.0, 255.0]">
            </property>
        </property>
        <property name="lights" class="ptolemy.data.expr.Parameter" value="{{name = &quot;L1&quot;, x = 50.0, y = 150.0}, {name = &quot;L2&quot;, x = 120.0, y = 20.0}, {name = &quot;L3&quot;, x = 300.0, y = 202.0}, {name = &quot;L4&quot;, x = 499.0, y = 199.0}, {name = &quot;L5&quot;, x = 88.0, y = 88.0}}">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 190.0]">
            </property>
        </property>
        <property name="sensors" class="ptolemy.data.expr.Parameter" value="{{name = &quot;S1&quot;, value = 276.4607272626583, x = 11.0, y = 11.0}, {name = &quot;S2&quot;, value = 621.451367547874, x = 123.0, y = 224.0}, {name = &quot;S3&quot;, value = 214.2019819439534, x = 355.0, y = 401.0}}">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[115.0, 210.0]">
            </property>
        </property>
        <property name="annotation2" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">POST /room/markers</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[84.99999999999994, 435.0]">
            </property>
        </property>
        <property name="annotation3" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">GET /room</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[85.0, 580.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={134, 22, 934, 634}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 524]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{347.0, 430.46875}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="ThreadedComposites (HttpGet, HttpPost): delay UNDEFINED for all">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[95.0, 235.0]">
            </property>
        </property>
        <property name="annotation4" class="ptolemy.kernel.util.Attribute">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_iconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure><svg><text x="20" y="20" style="font-size:14; font-family:SansSerif; fill:blue">Strip any \r since these do not occur on all operating systems</text></svg></configure>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
                <svg> 
                    <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-A-</text>
                </svg>
              </configure>
            </property>
            <property name="_controllerFactory" class="ptolemy.vergil.basic.NodeControllerFactory">
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.AnnotationEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[280.0, 345.0]">
            </property>
        </property>
        <port name="start" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{20.0, 200.0}">
            </property>
        </port>
        <port name="done" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[415.0, 720.0]">
            </property>
        </port>
        <entity name="Test" class="ptolemy.actor.lib.Test">
            <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{&quot;&lt;!DOCTYPE HTML&gt;&lt;html&gt;\t&lt;head&gt;\t\t&lt;!-- Prevents against cross-site scripting attacks that use UTF-7 --&gt;\t\t&lt;meta charset='utf-8'&gt;\t\t\t\t&lt;!--  Set width to pixel width of screen, so display isn't zoomed out\t\t      by default.  Mainly for mobile, but doesn't hurt on desktop. --&gt;\t\t&lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1\&quot;&gt;\t\t\t\t&lt;!-- Desktop-specific CSS --&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css\&quot; /&gt;\t\t\t\t&lt;!--  Custom CSS --&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;common.css\&quot; /&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;berkeley.css\&quot; /&gt;\t\t\t\t&lt;!--  Use Google CDN when possible, since it is very common, and \t\t      will probably already have downloaded to user's device.  \t\t      Scripts are generally cached by the device once downloaded,\t\t      with each CDN seen as unique, even if the script is the same.  --&gt;\t\t&lt;script src=\&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\&quot;&gt; &lt;/script&gt;\t\t\t\t&lt;!-- Desktop-specific JS--&gt;\t\t&lt;!-- jQueryUI not available through Google CDN --&gt;\t\t&lt;!--  Used for toggle checkboxes --&gt;\t\t&lt;script src=\&quot;http://code.jquery.com/ui/1.10.2/jquery-ui.js\&quot;&gt;&lt;/script&gt;\t\t\t\t&lt;!--  Heat map graphic uses the d3 library --&gt; \t\t&lt;script src=\&quot;http://d3js.org/d3.v3.min.js\&quot;&gt; &lt;/script&gt;\t\t&lt;script src=\&quot;heatmap.js\&quot;&gt; &lt;/script&gt;\t\t&lt;title&gt; Smart Room &lt;/title&gt;\t&lt;/head&gt;\t&lt;body&gt;\t \t \t&lt;!-- Content --&gt;\t&lt;div&gt;\t\t&lt;!-- Toggle radio group from jQueryUI --&gt;\t\t&lt;div id=\&quot;radio-group\&quot; class=\&quot;radio-group\&quot;&gt;\t\t\t&lt;input type=\&quot;radio\&quot; id=\&quot;radio1\&quot; name=\&quot;radio\&quot; checked=\&quot;checked\&quot; onclick=\&quot;postMarkers()\&quot;/&gt;&lt;label for=\&quot;radio1\&quot;&gt;View Heat Map&lt;/label&gt;\t\t\t&lt;input type=\&quot;radio\&quot; id=\&quot;radio2\&quot; name=\&quot;radio\&quot; onclick=\&quot;clearHeatMap()\&quot;/&gt;&lt;label for=\&quot;radio2\&quot;&gt;Move Markers&lt;/label&gt;\t\t&lt;/div&gt;\t\t\t\t&lt;div id=\&quot;room-map\&quot;&gt; \t\t\t\t&lt;/div&gt;\t&lt;/div&gt;\t\t &lt;div&gt; \t \t &lt;p&gt; This demo shows a room with five light sources and three sensors. &lt;/p&gt;\t \t &lt;p&gt; The Ptolemy web server calculates the light received at each sensor &lt;br&gt;\t \t     and a heat map of the illumination at each point in the room. &lt;/p&gt;\t \t &lt;p&gt; The lights and sensors may be moved in the \&quot;Move Markers\&quot; tab. &lt;br&gt;\t \t     Please wait while the heat map loads... &lt;/p&gt; \t \t&lt;/div&gt;\t\t&lt;!-- Footer --&gt; \t&lt;footer data-role=\&quot;footer\&quot;&gt; \t\t&lt;ul&gt; \t\t\t&lt;li&gt; &lt;/li&gt;\t\t&lt;/ul&gt;\t&lt;/footer&gt;\t\t&lt;/body&gt;&lt;/html&gt;&quot;}">
            </property>
            <property name="trainingMode" class="ptolemy.actor.parameters.SharedParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[510.0, 415.0]">
            </property>
        </entity>
        <entity name="RecordAssembler" class="ptolemy.actor.lib.RecordAssembler">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[315.0, 480.0]">
            </property>
            <port name="lightsList" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="sensorsList" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Const" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="lights">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[129.99999999999994, 495.0]">
            </property>
        </entity>
        <entity name="Const2" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="sensors">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[134.99999999999994, 530.0]">
            </property>
        </entity>
        <entity name="Test2" class="ptolemy.actor.lib.Test">
            <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{&quot;\&quot;OK\&quot;&quot;}">
            </property>
            <property name="trainingMode" class="ptolemy.actor.parameters.SharedParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[585.0, 620.0]">
            </property>
        </entity>
        <entity name="Test3" class="ptolemy.actor.lib.Test">
            <property name="correctValues" class="ptolemy.data.expr.Parameter" value="{&quot;&lt;!DOCTYPE HTML&gt;&lt;html&gt;\t&lt;head&gt;\t\t&lt;!-- Prevents against cross-site scripting attacks that use UTF-7 --&gt;\t\t&lt;meta charset='utf-8'&gt;\t\t\t\t&lt;!--  Set width to pixel width of screen, so display isn't zoomed out\t\t      by default.  Mainly for mobile, but doesn't hurt on desktop. --&gt;\t\t&lt;meta name=\&quot;viewport\&quot; content=\&quot;width=device-width, initial-scale=1\&quot;&gt;\t\t\t\t&lt;!-- Desktop-specific CSS --&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css\&quot; /&gt;\t\t\t\t&lt;!--  Custom CSS --&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;common.css\&quot; /&gt;\t\t&lt;link rel=\&quot;stylesheet\&quot; href=\&quot;berkeley.css\&quot; /&gt;\t\t\t\t&lt;!--  Use Google CDN when possible, since it is very common, and \t\t      will probably already have downloaded to user's device.  \t\t      Scripts are generally cached by the device once downloaded,\t\t      with each CDN seen as unique, even if the script is the same.  --&gt;\t\t&lt;script src=\&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js\&quot;&gt; &lt;/script&gt;\t\t\t\t&lt;!-- Desktop-specific JS--&gt;\t\t&lt;!-- jQueryUI not available through Google CDN --&gt;\t\t&lt;!--  Used for toggle checkboxes --&gt;\t\t&lt;script src=\&quot;http://code.jquery.com/ui/1.10.2/jquery-ui.js\&quot;&gt;&lt;/script&gt;\t\t\t\t&lt;!--  Heat map graphic uses the d3 library --&gt; \t\t&lt;script src=\&quot;http://d3js.org/d3.v3.min.js\&quot;&gt; &lt;/script&gt;\t\t&lt;script src=\&quot;heatmap.js\&quot;&gt; &lt;/script&gt;\t\t&lt;title&gt; Smart Room &lt;/title&gt;\t&lt;/head&gt;\t&lt;body&gt;\t \t \t&lt;!-- Content --&gt;\t&lt;div&gt;\t\t&lt;!-- Toggle radio group from jQueryUI --&gt;\t\t&lt;div id=\&quot;radio-group\&quot; class=\&quot;radio-group\&quot;&gt;\t\t\t&lt;input type=\&quot;radio\&quot; id=\&quot;radio1\&quot; name=\&quot;radio\&quot; checked=\&quot;checked\&quot; onclick=\&quot;postMarkers()\&quot;/&gt;&lt;label for=\&quot;radio1\&quot;&gt;View Heat Map&lt;/label&gt;\t\t\t&lt;input type=\&quot;radio\&quot; id=\&quot;radio2\&quot; name=\&quot;radio\&quot; onclick=\&quot;clearHeatMap()\&quot;/&gt;&lt;label for=\&quot;radio2\&quot;&gt;Move Markers&lt;/label&gt;\t\t&lt;/div&gt;\t\t\t\t&lt;div id=\&quot;room-map\&quot;&gt; \t\t\t\t&lt;/div&gt;\t&lt;/div&gt;\t\t &lt;div&gt; \t \t &lt;p&gt; This demo shows a room with five light sources and three sensors. &lt;/p&gt;\t \t &lt;p&gt; The Ptolemy web server calculates the light received at each sensor &lt;br&gt;\t \t     and a heat map of the illumination at each point in the room. &lt;/p&gt;\t \t &lt;p&gt; The lights and sensors may be moved in the \&quot;Move Markers\&quot; tab. &lt;br&gt;\t \t     Please wait while the heat map loads... &lt;/p&gt; \t \t&lt;/div&gt;\t\t&lt;!-- Footer --&gt; \t&lt;footer data-role=\&quot;footer\&quot;&gt; \t\t&lt;ul&gt; \t\t\t&lt;li&gt; &lt;/li&gt;\t\t&lt;/ul&gt;\t&lt;/footer&gt;\t\t&lt;/body&gt;&lt;/html&gt;&quot;}">
            </property>
            <property name="trainingMode" class="ptolemy.actor.parameters.SharedParameter" value="false">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[525.0, 695.0]">
            </property>
        </entity>
        <entity name="TokenToJSON" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[219.99999999999994, 495.0]">
            </property>
        </entity>
        <entity name="TokenToJSON2" class="ptolemy.actor.lib.conversions.json.TokenToJSON">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[219.99999999999994, 545.0]">
            </property>
        </entity>
        <entity name="Const3" class="ptolemy.actor.lib.Const">
            <property name="value" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Create a constant sequence.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 720.0]">
            </property>
        </entity>
        <entity name="ThreadedComposite" class="ptolemy.actor.lib.hoc.ThreadedComposite">
            <property name="delay" class="ptolemy.data.expr.Parameter" value="UNDEFINED">
            </property>
            <doc>Execute the contained model in a separate thread with optional real-time properties.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                <property name="echos" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="echoBoxColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 1.0, 0.0, 1.0}">
                </property>
            </property>
            <property name="_configurer" class="ptolemy.actor.gui.EditorPaneFactory">
            </property>
            <property name="_configurer2" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
            </property>
            <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[140.0, 350.0]">
            </property>
            <port name="output" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="status" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter">
                </property>
            </port>
            <entity name="HttpGet" class="org.ptolemy.ptango.lib.HttpGet">
                <property name="url" class="ptolemy.actor.parameters.PortParameter" value="http://localhost:$port/room">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{65, 370}">
                </property>
            </entity>
        </entity>
        <entity name="ThreadedComposite2" class="ptolemy.actor.lib.hoc.ThreadedComposite">
            <property name="delay" class="ptolemy.data.expr.Parameter" value="UNDEFINED">
            </property>
            <doc>Execute the contained model in a separate thread with optional real-time properties.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                <property name="echos" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="echoBoxColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 1.0, 0.0, 1.0}">
                </property>
            </property>
            <property name="_configurer" class="ptolemy.actor.gui.EditorPaneFactory">
            </property>
            <property name="_configurer2" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
            </property>
            <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[475.0, 500.0]">
            </property>
            <port name="input" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="input"/>
            </port>
            <port name="output" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
            </port>
            <port name="status" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter">
                </property>
            </port>
            <entity name="HttpPost" class="org.ptolemy.ptango.lib.HttpPost">
                <property name="url" class="ptolemy.actor.parameters.PortParameter" value="http://localhost:$port/room/markers">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{455, 420}">
                </property>
            </entity>
        </entity>
        <entity name="ThreadedComposite3" class="ptolemy.actor.lib.hoc.ThreadedComposite">
            <property name="delay" class="ptolemy.data.expr.Parameter" value="UNDEFINED">
            </property>
            <doc>Execute the contained model in a separate thread with optional real-time properties.</doc>
            <property name="_icon" class="ptolemy.vergil.icon.CopyCatIcon">
                <property name="echos" class="ptolemy.data.expr.Parameter" value="1">
                </property>
                <property name="echoBoxColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 1.0, 0.0, 1.0}">
                </property>
            </property>
            <property name="_configurer" class="ptolemy.actor.gui.EditorPaneFactory">
            </property>
            <property name="_configurer2" class="ptolemy.actor.gui.InsideEntityEditorPaneFactory">
            </property>
            <property name="_tableauFactory" class="ptolemy.actor.gui.LevelSkippingTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 655.0]">
            </property>
            <port name="output" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
            </port>
            <port name="trigger" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="input"/>
                <property name="multiport"/>
            </port>
            <port name="status" class="ptolemy.actor.lib.hoc.MirrorPort">
                <property name="output"/>
                <property name="defaultValue" class="ptolemy.data.expr.Parameter">
                </property>
            </port>
            <entity name="HttpGet" class="org.ptolemy.ptango.lib.HttpGet">
                <property name="url" class="ptolemy.actor.parameters.PortParameter" value="http://localhost:$port/room">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{440, 615}">
                </property>
            </entity>
        </entity>
        <entity name="StringReplace" class="ptolemy.actor.lib.string.StringReplace">
            <property name="pattern" class="ptolemy.actor.parameters.PortParameter" value="\r">
            </property>
            <property name="replacement" class="ptolemy.actor.parameters.PortParameter" value="">
            </property>
            <property name="stringToEdit" class="ptolemy.actor.parameters.PortParameter" value="&lt;!DOCTYPE HTML&gt;&lt;html&gt;	&lt;head&gt;		&lt;!-- Prevents against cross-site scripting attacks that use UTF-7 --&gt;		&lt;meta charset='utf-8'&gt;				&lt;!--  Set width to pixel width of screen, so display isn't zoomed out		      by default.  Mainly for mobile, but doesn't hurt on desktop. --&gt;		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;				&lt;!-- Desktop-specific CSS --&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css&quot; /&gt;				&lt;!--  Custom CSS --&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;common.css&quot; /&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;berkeley.css&quot; /&gt;				&lt;!--  Use Google CDN when possible, since it is very common, and 		      will probably already have downloaded to user's device.  		      Scripts are generally cached by the device once downloaded,		      with each CDN seen as unique, even if the script is the same.  --&gt;		&lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;&gt; &lt;/script&gt;				&lt;!-- Desktop-specific JS--&gt;		&lt;!-- jQueryUI not available through Google CDN --&gt;		&lt;!--  Used for toggle checkboxes --&gt;		&lt;script src=&quot;http://code.jquery.com/ui/1.10.2/jquery-ui.js&quot;&gt;&lt;/script&gt;				&lt;!--  Heat map graphic uses the d3 library --&gt; 		&lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt; &lt;/script&gt;		&lt;script src=&quot;heatmap.js&quot;&gt; &lt;/script&gt;		&lt;title&gt; Smart Room &lt;/title&gt;	&lt;/head&gt;	&lt;body&gt;	 	 	&lt;!-- Content --&gt;	&lt;div&gt;		&lt;!-- Toggle radio group from jQueryUI --&gt;		&lt;div id=&quot;radio-group&quot; class=&quot;radio-group&quot;&gt;			&lt;input type=&quot;radio&quot; id=&quot;radio1&quot; name=&quot;radio&quot; checked=&quot;checked&quot; onclick=&quot;postMarkers()&quot;/&gt;&lt;label for=&quot;radio1&quot;&gt;View Heat Map&lt;/label&gt;			&lt;input type=&quot;radio&quot; id=&quot;radio2&quot; name=&quot;radio&quot; onclick=&quot;clearHeatMap()&quot;/&gt;&lt;label for=&quot;radio2&quot;&gt;Move Markers&lt;/label&gt;		&lt;/div&gt;				&lt;div id=&quot;room-map&quot;&gt; 				&lt;/div&gt;	&lt;/div&gt;		 &lt;div&gt; 	 	 &lt;p&gt; This demo shows a room with five light sources and three sensors. &lt;/p&gt;	 	 &lt;p&gt; The Ptolemy web server calculates the light received at each sensor &lt;br&gt;	 	     and a heat map of the illumination at each point in the room. &lt;/p&gt;	 	 &lt;p&gt; The lights and sensors may be moved in the &quot;Move Markers&quot; tab. &lt;br&gt;	 	     Please wait while the heat map loads... &lt;/p&gt; 	 	&lt;/div&gt;		&lt;!-- Footer --&gt; 	&lt;footer data-role=&quot;footer&quot;&gt; 		&lt;ul&gt; 			&lt;li&gt; &lt;/li&gt;		&lt;/ul&gt;	&lt;/footer&gt;		&lt;/body&gt;&lt;/html&gt;">
            </property>
            <property name="regularExpression" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Replace the patterns that match a regular expression</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{370.0, 415.0}">
            </property>
        </entity>
        <entity name="StringReplace3" class="ptolemy.actor.lib.string.StringReplace">
            <property name="pattern" class="ptolemy.actor.parameters.PortParameter" value="\r">
            </property>
            <property name="replacement" class="ptolemy.actor.parameters.PortParameter" value="">
            </property>
            <property name="stringToEdit" class="ptolemy.actor.parameters.PortParameter" value="&lt;!DOCTYPE HTML&gt;&lt;html&gt;	&lt;head&gt;		&lt;!-- Prevents against cross-site scripting attacks that use UTF-7 --&gt;		&lt;meta charset='utf-8'&gt;				&lt;!--  Set width to pixel width of screen, so display isn't zoomed out		      by default.  Mainly for mobile, but doesn't hurt on desktop. --&gt;		&lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1&quot;&gt;				&lt;!-- Desktop-specific CSS --&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css&quot; /&gt;				&lt;!--  Custom CSS --&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;common.css&quot; /&gt;		&lt;link rel=&quot;stylesheet&quot; href=&quot;berkeley.css&quot; /&gt;				&lt;!--  Use Google CDN when possible, since it is very common, and 		      will probably already have downloaded to user's device.  		      Scripts are generally cached by the device once downloaded,		      with each CDN seen as unique, even if the script is the same.  --&gt;		&lt;script src=&quot;http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js&quot;&gt; &lt;/script&gt;				&lt;!-- Desktop-specific JS--&gt;		&lt;!-- jQueryUI not available through Google CDN --&gt;		&lt;!--  Used for toggle checkboxes --&gt;		&lt;script src=&quot;http://code.jquery.com/ui/1.10.2/jquery-ui.js&quot;&gt;&lt;/script&gt;				&lt;!--  Heat map graphic uses the d3 library --&gt; 		&lt;script src=&quot;http://d3js.org/d3.v3.min.js&quot;&gt; &lt;/script&gt;		&lt;script src=&quot;heatmap.js&quot;&gt; &lt;/script&gt;		&lt;title&gt; Smart Room &lt;/title&gt;	&lt;/head&gt;	&lt;body&gt;	 	 	&lt;!-- Content --&gt;	&lt;div&gt;		&lt;!-- Toggle radio group from jQueryUI --&gt;		&lt;div id=&quot;radio-group&quot; class=&quot;radio-group&quot;&gt;			&lt;input type=&quot;radio&quot; id=&quot;radio1&quot; name=&quot;radio&quot; checked=&quot;checked&quot; onclick=&quot;postMarkers()&quot;/&gt;&lt;label for=&quot;radio1&quot;&gt;View Heat Map&lt;/label&gt;			&lt;input type=&quot;radio&quot; id=&quot;radio2&quot; name=&quot;radio&quot; onclick=&quot;clearHeatMap()&quot;/&gt;&lt;label for=&quot;radio2&quot;&gt;Move Markers&lt;/label&gt;		&lt;/div&gt;				&lt;div id=&quot;room-map&quot;&gt; 				&lt;/div&gt;	&lt;/div&gt;		 &lt;div&gt; 	 	 &lt;p&gt; This demo shows a room with five light sources and three sensors. &lt;/p&gt;	 	 &lt;p&gt; The Ptolemy web server calculates the light received at each sensor &lt;br&gt;	 	     and a heat map of the illumination at each point in the room. &lt;/p&gt;	 	 &lt;p&gt; The lights and sensors may be moved in the &quot;Move Markers&quot; tab. &lt;br&gt;	 	     Please wait while the heat map loads... &lt;/p&gt; 	 	&lt;/div&gt;		&lt;!-- Footer --&gt; 	&lt;footer data-role=&quot;footer&quot;&gt; 		&lt;ul&gt; 			&lt;li&gt; &lt;/li&gt;		&lt;/ul&gt;	&lt;/footer&gt;		&lt;/body&gt;&lt;/html&gt;">
            </property>
            <property name="regularExpression" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Replace the patterns that match a regular expression</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[360.0, 665.0]">
            </property>
        </entity>
        <entity name="StringReplace2" class="ptolemy.actor.lib.string.StringReplace">
            <property name="pattern" class="ptolemy.actor.parameters.PortParameter" value="\r">
            </property>
            <property name="replacement" class="ptolemy.actor.parameters.PortParameter" value="">
            </property>
            <property name="stringToEdit" class="ptolemy.actor.parameters.PortParameter" value="&quot;OK&quot;">
            </property>
            <property name="regularExpression" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <doc>Replace the patterns that match a regular expression</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 620.0]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[440.0, 570.0]">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation7" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[219.99999999999994, 655.0]">
            </vertex>
        </relation>
        <relation name="relation8" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[295.0, 425.0]">
            </vertex>
        </relation>
        <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="start" relation="relation9"/>
        <link port="done" relation="relation10"/>
        <link port="Test.input" relation="relation11"/>
        <link port="RecordAssembler.output" relation="relation6"/>
        <link port="RecordAssembler.lightsList" relation="relation3"/>
        <link port="RecordAssembler.sensorsList" relation="relation5"/>
        <link port="Const.output" relation="relation2"/>
        <link port="Const.trigger" relation="relation8"/>
        <link port="Const2.output" relation="relation4"/>
        <link port="Const2.trigger" relation="relation8"/>
        <link port="Test2.input" relation="relation12"/>
        <link port="Test3.input" relation="relation14"/>
        <link port="TokenToJSON.input" relation="relation2"/>
        <link port="TokenToJSON.output" relation="relation3"/>
        <link port="TokenToJSON2.input" relation="relation4"/>
        <link port="TokenToJSON2.output" relation="relation5"/>
        <link port="Const3.output" relation="relation10"/>
        <link port="Const3.trigger" relation="relation7"/>
        <link port="ThreadedComposite.output" relation="relation8"/>
        <link port="ThreadedComposite.trigger" relation="relation9"/>
        <link port="ThreadedComposite2.input" relation="relation6"/>
        <link port="ThreadedComposite2.output" relation="relation"/>
        <link port="ThreadedComposite3.output" relation="relation7"/>
        <link port="ThreadedComposite3.trigger" relation="relation"/>
        <link port="StringReplace.stringToEdit" relation="relation8"/>
        <link port="StringReplace.output" relation="relation11"/>
        <link port="StringReplace3.stringToEdit" relation="relation7"/>
        <link port="StringReplace3.output" relation="relation14"/>
        <link port="StringReplace2.stringToEdit" relation="relation"/>
        <link port="StringReplace2.output" relation="relation12"/>
    </entity>
    <entity name="MicrostepDelay" class="ptolemy.actor.lib.MicrostepDelay">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[140.0, 170.0]">
        </property>
    </entity>
    <entity name="Init" class="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[710.0, 110.0]">
        </property>
        <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[45.0, 55.0]">
            </property>
        </entity>
        <entity name="Ramp" class="ptolemy.actor.lib.Ramp">
            <property name="init" class="ptolemy.actor.parameters.PortParameter" value="WebServer.getAttribute(&quot;deployedPort&quot;).getToken().intValue()">
            </property>
            <property name="step" class="ptolemy.actor.parameters.PortParameter" value="0">
            </property>
            <doc>Create a sequence of tokens with increasing value</doc>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 65.0]">
            </property>
        </entity>
        <entity name="SetVariable" class="ptolemy.actor.lib.SetVariable">
            <property name="variableName" class="ptolemy.kernel.util.StringAttribute" value="port">
            </property>
            <property name="delayed" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="variableName">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="40">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[285.0, 65.0]">
            </property>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="SingleEvent.output" relation="relation"/>
        <link port="Ramp.output" relation="relation2"/>
        <link port="Ramp.trigger" relation="relation"/>
        <link port="SetVariable.input" relation="relation2"/>
    </entity>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation2" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[60.0, 170.0]">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="SingleEvent.output" relation="relation10"/>
    <link port="Stop.input" relation="relation3"/>
    <link port="MicrostepDelay10.input" relation="relation5"/>
    <link port="MicrostepDelay10.output" relation="relation2"/>
    <link port="Discrete TimeDelay.input" relation="relation7"/>
    <link port="Discrete TimeDelay.output" relation="relation"/>
    <link port="SmartRoomService.done" relation="relation4"/>
    <link port="RecordAssembler.output" relation="relation5"/>
    <link port="RecordAssembler.clientdone" relation="relation9"/>
    <link port="RecordAssembler.servicedone" relation="relation4"/>
    <link port="Const.output" relation="relation3"/>
    <link port="Const.trigger" relation="relation2"/>
    <link port="SetVariable.input" relation="relation6"/>
    <link port="Const2.output" relation="relation6"/>
    <link port="Const2.trigger" relation="relation10"/>
    <link port="SmartRoomClient.start" relation="relation"/>
    <link port="SmartRoomClient.done" relation="relation9"/>
    <link port="MicrostepDelay.input" relation="relation10"/>
    <link port="MicrostepDelay.output" relation="relation7"/>
</entity>
