<?xml version="1.0" standalone="no"?>
<!DOCTYPE entity PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<entity name="GeneratorRegulatorProtectorWithMetro" class="ptolemy.actor.TypedCompositeActor">
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="9.1.devel">
    </property>
    <property name="MetroIIDirector" class="ptolemy.domains.metroII.kernel.MetroIIDirector">
        <property name="iterations" class="ptolemy.data.expr.Parameter" value="5300">
        </property>
        <property name="printTrace" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="printDebug" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[175.0, 125.0]">
        </property>
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={110, 178, 914, 607}, maximized=false}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 516]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{417.0, 309.703125}">
    </property>
    <entity name="FunctionModel" class="ptolemy.domains.metroII.kernel.MetroIICompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[155.0, 220.0]">
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={528, 242, 1039, 630}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[825, 539]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.0303616933014637">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{317.4921875000001, 253.40909700920244}">
        </property>
        <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="At time 15, turn&#10;on a load.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.RelativeLocation" value="[-75.0, 265.0]">
                <property name="relativeTo" class="ptolemy.kernel.util.StringAttribute">
                </property>
                <property name="relativeToElementName" class="ptolemy.kernel.util.StringAttribute">
                </property>
            </property>
        </property>
        <property name="Title" class="ptolemy.vergil.basic.export.web.Title" value="Generator Regulator with Overvoltage Protection">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 4.999999999999943]">
            </property>
        </property>
        <property name="LocalPreferences" class="ptolemy.actor.gui.PtolemyPreferences">
            <property name="_showParameters" class="ptolemy.data.expr.StringParameter" value="Overridden parameters only">
                <display name="Show parameters"/>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[395.0, 430.0]">
            </property>
        </property>
        <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model disconnects a connected load if the measured voltage exceeds a specified threshold.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[40.0, 35.0]">
            </property>
        </property>
        <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Previous model: GeneratorRegulator">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 360.0]">
            </property>
            <property name="LiveLink" class="ptolemy.actor.gui.LiveLink" value="$PTII/ptolemy/demo/ElectricPowerSystem/GeneratorRegulator.xml">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">LL</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{395, 280}">
                </property>
            </property>
            <property name="IconLink" class="ptolemy.vergil.basic.export.web.IconLink" value="http://icyphy.org/models/GeneratorRegulator/index.html">
                <property name="linkTarget" class="ptolemy.vergil.basic.export.web.LinkTarget" value="_blank">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{340, 390}">
                </property>
            </property>
        </property>
        <property name="overVoltageThreshold" class="ptolemy.data.expr.Parameter" value="115.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-59.99999999999994, 85.0]">
            </property>
        </property>
        <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Change this to 120 or larger and the&#10;overvoltage protection does not kick in.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-64.99999999999994, 95.0]">
            </property>
        </property>
        <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Next model: GeneratorRegulatorFMUProtector">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[330.0, 385.0]">
            </property>
            <property name="LiveLink" class="ptolemy.actor.gui.LiveLink" value="$PTII/ptolemy/demo/ElectricPowerSystem/GeneratorRegulatorFMUProtector.xml">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">LL</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{395, 280}">
                </property>
            </property>
            <property name="IconLink" class="ptolemy.vergil.basic.export.web.IconLink" value="http://icyphy.org/models/GeneratorRegulatorFMUProtector/index.html">
                <property name="linkTarget" class="ptolemy.vergil.basic.export.web.LinkTarget" value="_blank">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="{375, 420}">
                </property>
            </property>
        </property>
        <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{1.0,0.0,0.0,1.0}">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Notice the voltage spike when the load is disconnected.&#10;Also notice that the PID controller tries to take the drive&#10;negative, but the generator model clips the drive input&#10;to be non-negative.">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-69.99999999999994, 355.0]">
            </property>
        </property>
        <property name="MetroIIDEDirector" class="ptolemy.domains.metroII.kernel.MetroIIDEDirector">
            <property name="printTrace" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, 30.0]">
            </property>
        </property>
        <entity name="TimedPlotter" class="ptolemy.actor.lib.gui.TimedPlotter">
            <property name="legend" class="ptolemy.kernel.util.StringAttribute" value="Voltage, Drive">
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={522, 525, 641, 464}, maximized=false}">
            </property>
            <property name="_plotSize" class="ptolemy.actor.gui.SizeAttribute" value="[639, 412]">
            </property>
            <property name="useLocalTime" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[475.0, 285.0]">
            </property>
            <configure>
<?plotml <!DOCTYPE plot PUBLIC "-//UC Berkeley//DTD PlotML 1//EN"
"http://ptolemy.eecs.berkeley.edu/xml/dtd/PlotML_1.dtd">
<plot>
<title>Voltage and Drive over time</title>
<xLabel>time (seconds)</xLabel>
<yLabel>voltage, drive</yLabel>
<xRange min="0.0" max="59.0"/>
<yRange min="-72.59478582959035" max="285.5815607552148"/>
<default connected="no" marks="various" stems="yes"/>
</plot>?>
            </configure>
        </entity>
        <entity name="GeneratorContactorLoad" class="ptolemy.demo.ElectricPowerSystem.GeneratorContactorLoad">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[310.0, 200.0]">
            </property>
            <property name="loadImpedance" class="ptolemy.data.expr.Parameter" value="1.0">
            </property>
            <property name="voltageSamplePeriod" class="ptolemy.data.expr.Parameter" value="1.0">
            </property>
            <property name="generatorTimeConstant" class="ptolemy.data.expr.Parameter" value="5.0">
            </property>
            <property name="generatorOutputImpedance" class="ptolemy.data.expr.Parameter" value="1.0">
            </property>
        </entity>
        <entity name="SingleEvent" class="ptolemy.actor.lib.SingleEvent">
            <property name="time" class="ptolemy.data.expr.Parameter" value="15.0">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-44.99999999999994, 210.0]">
            </property>
        </entity>
        <entity name="Expression" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="voltage &gt;= overVoltageThreshold">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[220.0, 315.0]">
            </property>
            <property name="_flipPortsHorizontal" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <port name="voltage" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="MicrostepDelay" class="ptolemy.actor.lib.MicrostepDelay">
            <property name="_location" class="ptolemy.kernel.util.Location" value="[165.0, 210.0]">
            </property>
        </entity>
        <entity name="Controller" class="ptolemy.domains.metroII.kernel.MetroIICompositeActor">
            <property name="_location" class="ptolemy.kernel.util.Location" value="{500.0, 160.0}">
            </property>
            <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This is a sampled-data feedback controller that simply compares&#10;the measured voltage against the desired voltage and then feeds&#10;the error signal into a PID (Proportional, Integral, Derivative) control filter.">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[65.0, 230.0]">
                </property>
            </property>
            <property name="LocalPreferences" class="ptolemy.actor.gui.PtolemyPreferences">
                <property name="_showParameters" class="ptolemy.data.expr.StringParameter" value="Overridden parameters only">
                    <display name="Show parameters"/>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[405.0, 320.0]">
                </property>
            </property>
            <property name="proportionalGain" class="ptolemy.data.expr.Parameter" value="2.0">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 325.0]">
                </property>
            </property>
            <property name="integratorGain" class="ptolemy.data.expr.Parameter" value="1.0">
                <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
                </property>
                <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                    <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                    </property>
                </property>
                <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                    <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
                </property>
                <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[135.0, 345.0]">
                </property>
            </property>
            <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={198, 389, 914, 607}, maximized=false}">
            </property>
            <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 516]">
            </property>
            <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.079244821897721">
            </property>
            <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{317.734375, 259.2416666666667}">
            </property>
            <property name="MetroSDFDirector(Sequential)" class="ptolemy.domains.metroII.kernel.MetroSequentialSDFDirector">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[370.0, 90.0]">
                </property>
            </property>
            <port name="drive" class="ptolemy.actor.TypedIOPort">
                <property name="output"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[440.0, 175.0]">
                </property>
            </port>
            <port name="voltage" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 175.0]">
                </property>
            </port>
            <entity name="DesiredVoltage" class="ptolemy.actor.lib.Const">
                <property name="value" class="ptolemy.data.expr.Parameter" value="110.0">
                </property>
                <doc>Create a constant sequence.</doc>
                <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                    <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="value">
                    </property>
                    <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                    </property>
                </property>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[160.0, 100.0]">
                </property>
            </entity>
            <entity name="AddSubtract" class="ptolemy.actor.lib.AddSubtract">
                <property name="_location" class="ptolemy.kernel.util.Location" value="[275.0, 165.0]">
                </property>
            </entity>
            <entity name="PID" class="ptolemy.domains.de.lib.PID">
                <property name="Kp" class="ptolemy.data.expr.Parameter" value="proportionalGain">
                </property>
                <property name="Ki" class="ptolemy.data.expr.Parameter" value="integratorGain">
                </property>
                <doc>Discrete proportional, integral, and derivative controller.</doc>
                <property name="_location" class="ptolemy.kernel.util.Location" value="[375.0, 175.0]">
                </property>
            </entity>
            <relation name="relation" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;AddSubtract.output&quot;,x=225.0,y=225.0}, tail={id=&quot;PID.input&quot;,x=325.0,y=235.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation2" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;DesiredVoltage.output&quot;,x=110.0,y=160.0}, tail={id=&quot;AddSubtract.plus&quot;,x=225.0,y=225.0}, points={185.0,160.0,185.0,215.0} } }">
                </property>
            </relation>
            <relation name="relation4_" class="ptolemy.actor.TypedIORelation">
                <property name="_layoutHint" class="ptolemy.vergil.actor.LayoutHint" value="{ { head={id=&quot;PID.output&quot;,x=325.0,y=235.0}, tail={id=&quot;drive._location&quot;,x=390.0,y=235.0}, points={} } }">
                </property>
            </relation>
            <relation name="relation3" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
                </property>
                <vertex name="vertex1" value="[120.0, 175.0]">
                </vertex>
            </relation>
            <link port="drive" relation="relation4_"/>
            <link port="voltage" relation="relation3"/>
            <link port="DesiredVoltage.output" relation="relation2"/>
            <link port="DesiredVoltage.trigger" relation="relation3"/>
            <link port="AddSubtract.plus" relation="relation2"/>
            <link port="AddSubtract.minus" relation="relation3"/>
            <link port="AddSubtract.output" relation="relation"/>
            <link port="PID.input" relation="relation"/>
            <link port="PID.output" relation="relation4_"/>
        </entity>
        <entity name="Supervisor" class="ptolemy.domains.metroII.kernel.MetroIIModalModel">
            <property name="_tableauFactory" class="ptolemy.vergil.modal.modal.ModalTableauFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[75.0, 210.0]">
            </property>
            <port name="onOff" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
            </port>
            <port name="fault" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="input"/>
                <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
                </property>
            </port>
            <port name="contactor" class="ptolemy.domains.modal.modal.ModalPort">
                <property name="output"/>
            </port>
            <entity name="_Controller" class="ptolemy.domains.modal.modal.ModalController">
                <property name="errorCause" class="ptolemy.data.expr.Parameter">
                </property>
                <property name="_library" class="ptolemy.moml.LibraryAttribute">
                    <configure>
      <entity name="state library" class="ptolemy.kernel.CompositeEntity"><input source="ptolemy/configs/basicUtilities.xml"></input><entity name="state" class="ptolemy.domains.modal.kernel.State"><property name="_centerName" class="ptolemy.kernel.util.Attribute"></property><property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory"></property></entity></entity>
    </configure>
                </property>
                <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
                    <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This state machine switches from off to on when onOff is present and true.&#10;If in the same reaction, fault is also present, it transitions immediately back to off.&#10;When it is in the on state, it transitions back to off if either fault is present and true,&#10;or onOff is present and false.">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{15.0, 235.0}">
                    </property>
                </property>
                <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={438, 1196, 914, 608}, maximized=false}">
                </property>
                <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[700, 516]">
                </property>
                <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.3076308074975571">
                </property>
                <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{267.8359375, 197.47968749999998}">
                </property>
                <port name="onOff" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 85.0]">
                    </property>
                </port>
                <port name="fault" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[35.0, 130.0]">
                    </property>
                </port>
                <port name="contactor" class="ptolemy.domains.modal.modal.RefinementPort">
                    <property name="input"/>
                    <property name="output"/>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="[470.0, 115.0]">
                    </property>
                </port>
                <entity name="off" class="ptolemy.domains.modal.kernel.State">
                    <property name="isInitialState" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{155.0, 100.0}">
                    </property>
                </entity>
                <entity name="on" class="ptolemy.domains.modal.kernel.State">
                    <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
                    </property>
                    <property name="_controllerFactory" class="ptolemy.vergil.modal.modal.HierarchicalStateControllerFactory">
                    </property>
                    <property name="_location" class="ptolemy.kernel.util.Location" value="{305.0, 100.0}">
                    </property>
                </entity>
                <relation name="relation" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="onOff">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="contactor = true">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.7753071309291377">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="-0.04770267934836719">
                    </property>
                </relation>
                <relation name="relation2" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="fault">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="contactor = false">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-0.6474117189486365">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.0587577909881927">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                    <property name="immediate" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </relation>
                <relation name="relation3" class="ptolemy.domains.modal.kernel.Transition">
                    <property name="guardExpression" class="ptolemy.kernel.util.StringAttribute" value="!onOff">
                    </property>
                    <property name="outputActions" class="ptolemy.domains.modal.kernel.OutputActionsAttribute" value="contactor = false">
                    </property>
                    <property name="exitAngle" class="ptolemy.data.expr.Parameter" value="-1.6222167676222667">
                    </property>
                    <property name="gamma" class="ptolemy.data.expr.Parameter" value="3.046288368636289">
                    </property>
                    <property name="nondeterministic" class="ptolemy.data.expr.Parameter" value="true">
                    </property>
                </relation>
                <link port="off.incomingPort" relation="relation2"/>
                <link port="off.incomingPort" relation="relation3"/>
                <link port="off.outgoingPort" relation="relation"/>
                <link port="on.incomingPort" relation="relation"/>
                <link port="on.outgoingPort" relation="relation2"/>
                <link port="on.outgoingPort" relation="relation3"/>
            </entity>
            <relation name="onOffRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="faultRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <relation name="contactorRelation" class="ptolemy.actor.TypedIORelation">
                <property name="width" class="ptolemy.data.expr.Parameter" value="Auto">
                </property>
            </relation>
            <link port="onOff" relation="onOffRelation"/>
            <link port="fault" relation="faultRelation"/>
            <link port="contactor" relation="contactorRelation"/>
            <link port="_Controller.onOff" relation="onOffRelation"/>
            <link port="_Controller.fault" relation="faultRelation"/>
            <link port="_Controller.contactor" relation="contactorRelation"/>
        </entity>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
            <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
            </property>
            <vertex name="vertex1" value="[430.0, 200.0]">
            </vertex>
        </relation>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
            <vertex name="vertex1" value="[250.0, 85.0]">
            </vertex>
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="TimedPlotter.input" relation="relation"/>
        <link port="TimedPlotter.input" relation="relation2"/>
        <link port="GeneratorContactorLoad.drive" relation="relation2"/>
        <link port="GeneratorContactorLoad.voltage" relation="relation"/>
        <link port="GeneratorContactorLoad.contactor" relation="relation6"/>
        <link port="SingleEvent.output" relation="relation5"/>
        <link port="Expression.output" relation="relation4"/>
        <link port="Expression.voltage" relation="relation"/>
        <link port="MicrostepDelay.input" relation="relation3"/>
        <link port="MicrostepDelay.output" relation="relation6"/>
        <link port="Controller.drive" relation="relation2"/>
        <link port="Controller.voltage" relation="relation"/>
        <link port="Supervisor.onOff" relation="relation5"/>
        <link port="Supervisor.fault" relation="relation4"/>
        <link port="Supervisor.contactor" relation="relation3"/>
    </entity>
</entity>
