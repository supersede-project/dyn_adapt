<?xml version="1.0" standalone="no"?>
<!DOCTYPE class PUBLIC "-//UC Berkeley//DTD MoML 1//EN"
    "http://ptolemy.eecs.berkeley.edu/xml/dtd/MoML_1.dtd">
<class name="HeatExchanger" extends="ptolemy.actor.TypedCompositeActor">
    <property name="initialTx" class="ptolemy.data.expr.Parameter" value="293.15">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 20.0]">
        </property>
    </property>
    <property name="_createdBy" class="ptolemy.kernel.attributes.VersionAttribute" value="10.0.devel">
    </property>
    <property name="_location" class="ptolemy.kernel.util.Location" value="{-350.05807495117176, -141.30117513967116}">
    </property>
    <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={0, 22, 1680, 1024}, maximized=true}">
    </property>
    <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1446, 914]">
    </property>
    <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.3011271236350195">
    </property>
    <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{480.82924631844577, 306.39111328124983}">
    </property>
    <property name="Title" class="ptolemy.vergil.basic.export.web.Title" value="Heat Exchanger">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, -45.0]">
        </property>
    </property>
    <property name="Annotation4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Temperature of engine air&#10;(warm) (in K)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 200.0]">
        </property>
    </property>
    <property name="Annotation5" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Temperature of heat&#10;exchanger output (in K)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[825.0, 350.0]">
        </property>
    </property>
    <property name="Annotation7" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This model descibes a heat exchanger that receives warm&#10;air (at temperature Te) and cold air (at temperature Ta)&#10;at a given flow rate (Wh), and produces the output air&#10;temperature (Th).">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, -5.0]">
        </property>
    </property>
    <property name="Annotation8" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Mass flow rate of warm air through&#10;the heat exchanger (in kg/s)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-75.0, 360.0]">
        </property>
    </property>
    <property name="Mx" class="ptolemy.data.expr.Parameter" value="13.61">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 40.0]">
        </property>
    </property>
    <property name="Annotation9" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Mass of the heat exchanger (in kg)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 30.0]">
        </property>
    </property>
    <property name="Annotation10" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="NOTE: Made-up numbers.">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[445.0, 55.0]">
        </property>
    </property>
    <property name="Annotation" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Temperature of ambient air&#10;(cold) (in K)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-30.0, 285.0]">
        </property>
    </property>
    <property name="Annotation2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Tx, the metal temperature&#10;in the heat exchanger (in K)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[670.0, 250.0]">
        </property>
    </property>
    <property name="Annotation3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="hh = Heat transfer coefficient of the hot side (in W / (K * m^2))">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 540.0]">
        </property>
    </property>
    <property name="Annotation6" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="ha = Heat transfer coefficient of the cold side (in W / (K * m^2))">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 465.0]">
        </property>
    </property>
    <property name="Annotation12" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Ah = Surface area of the metal on the hot side (in m^2)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 515.0]">
        </property>
    </property>
    <property name="Annotation13" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Aa = Surface area of the metal on the cold side (in m^2)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[485.0, 440.0]">
        </property>
    </property>
    <property name="Annotation14" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Constants:">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[440.0, 140.0]">
        </property>
    </property>
    <property name="Cair" class="ptolemy.data.expr.Parameter" value="1003.5">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 175.0]">
        </property>
        <property name="style" class="ptolemy.actor.gui.style.NotEditableLineStyle">
        </property>
    </property>
    <property name="Annotation15" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Specific heat capacity of air (in J/(kg * K))">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 165.0]">
        </property>
    </property>
    <property name="Cmetal" class="ptolemy.data.expr.Parameter" value="837.0">
        <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
            <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
        </property>
        <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
            <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
        </property>
        <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[450.0, 195.0]">
        </property>
        <property name="style" class="ptolemy.actor.gui.style.LineStyle">
        </property>
    </property>
    <property name="Annotation16" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Specific heat capacity of copper (in J/(kg * K)) &#10;(metal in the heat exchanger)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 185.0]">
        </property>
    </property>
    <property name="Annotation17" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.8,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="NOTE: Initial value set to&#10;293.15 K (20 degress celsius)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.RelativeLocation" value="[445.0, 80.0]">
        </property>
    </property>
    <property name="Annotation11" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Parameters:">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[435.0, -10.0]">
        </property>
    </property>
    <property name="enableBackwardTypeInference" class="ptolemy.data.expr.Parameter" value="false">
    </property>
    <property name="Annotation18" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Initial temperature of the metal (in K)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[560.0, 10.0]">
        </property>
    </property>
    <property name="Annotation20" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0,0.0,0.0,1.0}">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Mass flow rate of cold air through&#10;the heat exchanger (in kg/s)">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 435.0]">
        </property>
    </property>
    <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
        <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
        <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
        </property>
        <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
        </property>
        <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
        </property>
        <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
        </property>
        <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
        </property>
        <property name="text" class="ptolemy.kernel.util.StringAttribute" value="NOTE: The above two actors calculate coefficients hh*Ah&#10;and ha*Aa based on a Modelica model implemented by Yilin Mo.&#10;According to UTC, the numbers are off by a couple of orders of magnitude,&#10;so the two LinearMap actors have a &quot;fudge&quot; parameter that we use to&#10;bring them into the right range.">
            <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                </property>
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[-40.0, 570.0]">
        </property>
    </property>
    <port name="Tx" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[650.0, 270.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <port name="Te" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 225.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <port name="Ta" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 305.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <port name="Wh" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 380.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <port name="Th" class="ptolemy.actor.TypedIOPort">
        <property name="output"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[810.0, 370.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <port name="Wa" class="ptolemy.actor.TypedIOPort">
        <property name="input"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[190.0, 455.0]">
        </property>
        <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
        </property>
    </port>
    <class name="LinearMap" extends="ptolemy.actor.TypedCompositeActor">
        <property name="_location" class="ptolemy.kernel.util.Location" value="[30.0, 115.0]">
        </property>
        <property name="t_grid" class="ptolemy.data.expr.Parameter" value="{200.0,216.67,233.33,250.0,266.67,283.33,300.0,316.67,333.33,366.67}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-65.0, 140.0]">
            </property>
        </property>
        <property name="hcoef_grid" class="ptolemy.data.expr.Parameter" value="[5.08, 5.12, 5.2, 5.28, 5.37, 5.45, 5.53, 5.61, 5.65, 5.81; &#10;8.17, 8.25, 8.37, 8.54, 8.66, 8.82, 8.94, 9.06, 9.15, 9.35; &#10;10.61, 10.69, 10.85, 11.06, 11.22, 11.38, 11.59, 11.75, 11.91, 12.15; &#10;12.52, 12.68, 12.89, 13.13, 13.37, 13.62, 13.82, 14.02, 14.19, 14.51; &#10;14.15, 14.35, 14.59, 14.88, 15.12, 15.41, 15.65, 15.89, 16.14, 16.54; &#10;15.65, 15.85, 16.1, 16.42, 16.71, 16.99, 17.28, 17.52, 17.8, 18.25; &#10;16.95, 17.19, 17.48, 17.8, 18.13, 18.41, 18.74, 19.02, 19.27, 19.76; &#10;18.13, 18.37, 18.7, 19.06, 19.43, 19.76, 20.08, 20.37, 20.65, 21.18; &#10;19.23, 19.47, 19.84, 20.2, 20.57, 20.93, 21.3, 21.63, 21.95, 22.48; &#10;20.28, 20.53, 20.89, 21.3, 21.67, 22.03, 22.4, 22.76, 23.09, 23.7; &#10;20.28, 20.53, 20.89, 21.3, 21.67, 22.03, 22.4, 22.76, 23.09, 23.7]&#10;">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-65.0, 110.0]">
            </property>
        </property>
        <property name="m_flow_grid" class="ptolemy.data.expr.Parameter" value="{0.76,1.51,2.27,3.02,3.78,4.54,5.29,6.05,6.8,7.56,8.32}">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-65.0, 170.0]">
            </property>
        </property>
        <property name="AnnotationUpdated" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.2, 0.2, 0.2, 1.0}">
            </property>
            <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
            </property>
            <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Author: David Broman and Edward A. Lee">
                <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-75.0, 70.0]">
            </property>
        </property>
        <property name="AnnotationUpdated2" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
            <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
            </property>
            <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="This actor calculates the produce h* A of the heat transfer coefficient h&#10;and the area A using a table lookup. &#10;The actor is a port of the Modelica model implemented by Yilin Mo.">
                <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-75.0, 10.0]">
            </property>
        </property>
        <property name="fudge" class="ptolemy.data.expr.Parameter" value="100.0">
            <property name="_hideName" class="ptolemy.kernel.util.SingletonAttribute">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.ValueIcon">
                <property name="_color" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
                </property>
            </property>
            <property name="_smallIconDescription" class="ptolemy.kernel.util.SingletonConfigurableAttribute">
                <configure>
      <svg>
        <text x="20" style="font-size:14; font-family:SansSerif; fill:blue" y="20">-P-</text>
      </svg>
    </configure>
            </property>
            <property name="_editorFactory" class="ptolemy.vergil.toolbox.VisibleParameterEditorFactory">
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[180.0, 430.0]">
            </property>
        </property>
        <property name="AnnotationUpdated3" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
            <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
            </property>
            <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Fudge factor that makes the behavior reasonable.&#10;Something is wrong with the parameters, as without this,&#10;the outputs are &quot;a couple of orders magnitude too small.&quot;">
                <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[170.0, 440.0]">
            </property>
        </property>
        <property name="_windowProperties" class="ptolemy.actor.gui.WindowPropertiesAttribute" value="{bounds={161, 133, 1340, 802}, maximized=false}">
        </property>
        <property name="_vergilSize" class="ptolemy.actor.gui.SizeAttribute" value="[1106, 692]">
        </property>
        <property name="_vergilZoomFactor" class="ptolemy.data.expr.ExpertParameter" value="1.1845247141868045">
        </property>
        <property name="_vergilCenter" class="ptolemy.data.expr.ExpertParameter" value="{379.63281250000006, 295.87917712135055}">
        </property>
        <property name="AnnotationUpdated4" class="ptolemy.vergil.kernel.attributes.TextAttribute">
            <property name="_hideName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
            <property name="_hideAllParameters" class="ptolemy.data.expr.Parameter" value="true">
            </property>
            <property name="textSize" class="ptolemy.data.expr.Parameter" value="14">
            </property>
            <property name="textColor" class="ptolemy.actor.gui.ColorAttribute" value="{0.0, 0.0, 1.0, 1.0}">
            </property>
            <property name="fontFamily" class="ptolemy.data.expr.StringParameter" value="SansSerif">
            </property>
            <property name="bold" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="italic" class="ptolemy.data.expr.Parameter" value="false">
            </property>
            <property name="text" class="ptolemy.kernel.util.StringAttribute" value="Assert that the temperature and flows&#10;provided lie in range for the tables that&#10;are given.">
                <property name="_style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="20">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="80">
                    </property>
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-20.0, 365.0]">
            </property>
        </property>
        <port name="transfer" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[810.0, 295.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="flow" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 245.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="temperature" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[-70.0, 345.0]">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <entity name="Interpolation" class="ptolemy.actor.lib.Expression">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="fold(function(hcoef:double, i:int) &#10;   (m_flow &gt;= m_flow_grid(i) &amp;&amp; m_flow &lt;= m_flow_grid(i + 1)) ? ( &#10;       fold(function(hcoef:double, j:int) &#10;          t &gt;= t_grid(j) &amp;&amp; t &lt;= t_grid(j + 1) ? (&#10;                ((m_flow - m_flow_grid(i)) * (t - t_grid(j)) * hcoef_grid(i + 1,j + 1) + &#10;                 (m_flow - m_flow_grid(i)) * (t_grid(j + 1) - t) * hcoef_grid(i + 1,j) + &#10;                 (m_flow_grid(i + 1) - m_flow) * (t - t_grid(j)) * hcoef_grid(i,j + 1) + &#10;                 (m_flow_grid(i + 1) - m_flow) * (t_grid(j + 1) - t) * &#10;                  hcoef_grid(i,j)) / (t_grid(j + 1) - t_grid(j)) / &#10;                 (m_flow_grid(i + 1) - m_flow_grid(i))&#10;          ):hcoef,&#10;       hcoef, iterate(function(x:int)x+1,t_grid.length(),0))&#10;    ):hcoef,&#10;0.0, iterate(function(x:int)x+1,m_flow_grid.length(),0))&#10;&#10;">
                <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                    </property>
                </property>
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[470.0, 295.0]">
            </property>
            <port name="m_flow" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
            <port name="t" class="ptolemy.actor.TypedIOPort">
                <property name="input"/>
                <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
                </property>
            </port>
        </entity>
        <entity name="Scale" class="ptolemy.actor.lib.Scale">
            <property name="factor" class="ptolemy.data.expr.Parameter" value="fudge">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.AttributeValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="factor">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[720.0, 295.0]">
            </property>
        </entity>
        <entity name="Assert" class="ptolemy.actor.lib.Assert">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="temp &gt;= t_grid(0) &amp;&amp;&#10;temp &lt;= t_grid(t_grid.length()-1)">
                <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                    </property>
                </property>
            </property>
            <property name="message" class="ptolemy.data.expr.StringParameter" value="Temperature out of range.">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="{105.0, 345.0}">
            </property>
            <port name="temp" class="ptolemy.actor.lib.Assert$AssertPort">
                <property name="input"/>
            </port>
        </entity>
        <entity name="Assert2" class="ptolemy.actor.lib.Assert">
            <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="flow &gt;= m_flow_grid(0) &amp;&amp;&#10;flow &lt;= m_flow_grid(m_flow_grid.length()-1)">
                <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                    <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                    </property>
                    <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                    </property>
                </property>
            </property>
            <property name="message" class="ptolemy.data.expr.StringParameter" value="Flow out of range.">
            </property>
            <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
                <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
                </property>
                <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
                </property>
                <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
                </property>
            </property>
            <property name="_location" class="ptolemy.kernel.util.Location" value="[100.0, 245.0]">
            </property>
            <port name="flow" class="ptolemy.actor.lib.Assert$AssertPort">
                <property name="input"/>
            </port>
        </entity>
        <relation name="relation2" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation5" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        </relation>
        <relation name="relation" class="ptolemy.actor.TypedIORelation">
        </relation>
        <link port="transfer" relation="relation4"/>
        <link port="flow" relation="relation6"/>
        <link port="temperature" relation="relation5"/>
        <link port="Interpolation.output" relation="relation2"/>
        <link port="Interpolation.m_flow" relation="relation"/>
        <link port="Interpolation.t" relation="relation3"/>
        <link port="Scale.input" relation="relation2"/>
        <link port="Scale.output" relation="relation4"/>
        <link port="Assert.temp" relation="relation5"/>
        <link port="Assert._correspondingOutputPort_temp" relation="relation3"/>
        <link port="Assert2.flow" relation="relation6"/>
        <link port="Assert2._correspondingOutputPort_flow" relation="relation"/>
    </class>
    <entity name="Integrator" class="ptolemy.domains.continuous.lib.Integrator">
        <property name="initialState" class="ptolemy.actor.parameters.PortParameter" value="initialTx">
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[545.0, 305.0]">
        </property>
    </entity>
    <entity name="Expression" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="(hh_x_Ah * (Te - Tx)&#10;- ha_x_Aa * (Tx - Ta))&#10;/ (Mx * Cmetal)">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                </property>
            </property>
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[420.0, 305.0]">
        </property>
        <port name="Te" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="Ta" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="Tx" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="ha_x_Aa" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="hh_x_Ah" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="Expression2" class="ptolemy.actor.lib.Expression">
        <property name="expression" class="ptolemy.kernel.util.StringAttribute" value="Te - (hh_x_Ah)&#10;* (Te - Tx)&#10;/ (Wh * Cair)">
            <property name="style" class="ptolemy.actor.gui.style.TextStyle">
                <property name="height" class="ptolemy.data.expr.Parameter" value="10">
                </property>
                <property name="width" class="ptolemy.data.expr.Parameter" value="30">
                </property>
            </property>
        </property>
        <property name="_icon" class="ptolemy.vergil.icon.BoxedValueIcon">
            <property name="attributeName" class="ptolemy.kernel.util.StringAttribute" value="expression">
            </property>
            <property name="displayWidth" class="ptolemy.data.expr.Parameter" value="60">
            </property>
            <property name="displayHeight" class="ptolemy.data.expr.Parameter" value="10">
            </property>
        </property>
        <property name="_location" class="ptolemy.kernel.util.Location" value="[695.0, 370.0]">
        </property>
        <port name="output" class="ptolemy.actor.TypedIOPort">
            <property name="output"/>
            <property name="_type" class="ptolemy.actor.TypeAttribute" value="double">
            </property>
        </port>
        <port name="Tx" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="Te" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="Wh" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
        <port name="hh_x_Ah" class="ptolemy.actor.TypedIOPort">
            <property name="input"/>
            <property name="_cardinal" class="ptolemy.kernel.util.StringAttribute" value="SOUTH">
            </property>
            <property name="_showName" class="ptolemy.data.expr.SingletonParameter" value="true">
            </property>
        </port>
    </entity>
    <entity name="InstanceOfLinearMap" class="LinearMap">
        <display name="LinearMap for ha*Aa"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{315.0, 465.0}">
        </property>
        <property name="fudge" class="ptolemy.data.expr.Parameter" value="50.0">
        </property>
    </entity>
    <entity name="InstanceOfLinearMap2" class="LinearMap">
        <display name="LinearMap for hh*Ah"/>
        <property name="_location" class="ptolemy.kernel.util.Location" value="{315.0, 540.0}">
        </property>
        <property name="fudge" class="ptolemy.data.expr.Parameter" value="100.0">
        </property>
    </entity>
    <relation name="relation5" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation6" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[600.0, 305.0]">
        </vertex>
    </relation>
    <relation name="relation9" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[320.0, 350.0]">
        </vertex>
    </relation>
    <relation name="relation10" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[600.0, 350.0]">
        </vertex>
    </relation>
    <relation name="relation3" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[285.0, 370.0]">
        </vertex>
    </relation>
    <relation name="relation4" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[285.0, 270.0]">
        </vertex>
    </relation>
    <relation name="relation7" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation11" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[255.0, 305.0]">
        </vertex>
    </relation>
    <relation name="relation12" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[245.0, 380.0]">
        </vertex>
    </relation>
    <relation name="relation" class="ptolemy.actor.TypedIORelation">
        <vertex name="vertex1" value="[230.0, 270.0]">
        </vertex>
    </relation>
    <relation name="relation14" class="ptolemy.actor.TypedIORelation">
        <property name="width" class="ptolemy.data.expr.Parameter" value="-1">
        </property>
        <vertex name="vertex1" value="[430.0, 425.0]">
        </vertex>
    </relation>
    <relation name="relation13" class="ptolemy.actor.TypedIORelation">
    </relation>
    <relation name="relation8" class="ptolemy.actor.TypedIORelation">
    </relation>
    <link port="Tx" relation="relation6"/>
    <link port="Te" relation="relation"/>
    <link port="Ta" relation="relation11"/>
    <link port="Wh" relation="relation12"/>
    <link port="Th" relation="relation7"/>
    <link port="Wa" relation="relation13"/>
    <link port="Integrator.derivative" relation="relation5"/>
    <link port="Integrator.state" relation="relation6"/>
    <link port="Expression.output" relation="relation5"/>
    <link port="Expression.Te" relation="relation4"/>
    <link port="Expression.Ta" relation="relation11"/>
    <link port="Expression.Tx" relation="relation9"/>
    <link port="Expression.ha_x_Aa" relation="relation8"/>
    <link port="Expression.hh_x_Ah" relation="relation14"/>
    <link port="Expression2.output" relation="relation7"/>
    <link port="Expression2.Tx" relation="relation10"/>
    <link port="Expression2.Te" relation="relation3"/>
    <link port="Expression2.Wh" relation="relation12"/>
    <link port="Expression2.hh_x_Ah" relation="relation14"/>
    <link port="InstanceOfLinearMap.transfer" relation="relation8"/>
    <link port="InstanceOfLinearMap.flow" relation="relation13"/>
    <link port="InstanceOfLinearMap.temperature" relation="relation11"/>
    <link port="InstanceOfLinearMap2.transfer" relation="relation14"/>
    <link port="InstanceOfLinearMap2.flow" relation="relation12"/>
    <link port="InstanceOfLinearMap2.temperature" relation="relation"/>
    <link relation1="relation6" relation2="relation10"/>
    <link relation1="relation9" relation2="relation10"/>
    <link relation1="relation3" relation2="relation4"/>
    <link relation1="relation4" relation2="relation"/>
</class>
